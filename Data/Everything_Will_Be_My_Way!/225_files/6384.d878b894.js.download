(self.webpackChunkwebnovel_pc=self.webpackChunkwebnovel_pc||[]).push([[6384],{5443:(e,t,a)=>{"use strict";var r;void 0===(r=function(e){var t=a(7113),r=a(2501),i=a(3046),o=a(9026),n=a(3654);a(9985);var s={postError:function(){},afterDel:function(){},delAction:function(){}};function p(e){t.extend(!0,this,s,e),this.apiModal=null,this.init()}return p.prototype.handleDel=function(e){var t=this;new n({content:"Are you sure that you want to delete the content?",btGhost:{text:"Cancel"},bt:{text:"Delete",callback:function(){t.delAction(e)}}})},p.prototype.handleAbuse=function(e){if(!e.hasClass(".j_login")){var a=t("#abuseBookModal"),r=e.data("ejs");if(a.find('[name="bookId"]').val(r.bookId),a.find('[name="chapterId"]').val(r.chapterId),a.find('[name="reviewId"]').val(r.reviewId),a.find('[name="commentType"]').val("2"),this.apiModal)this.apiModal.load();else{var n=a.data("overlay");n||(n=a.overlay().data("overlay")),n.load(),new i({$form:a,postSuccess:function(){n.close(),(new o).success("Thanks！We will review it as soon as possible.")},postError:function(e){(new o).error(e.msg||"Something went wrong, please retry later")}}),this.apiModal=n}}},p.prototype.init=function(){var e=this;new r({sel:".j_comment_drop",parentScroll:".j_comment_chat",onItemClick:function(t,a){t.hasClass("j_chat_del")?e.handleDel(a):t.hasClass("j_chat_abuse")&&e.handleAbuse(a)}})},p}.call(t,a,t,e))||(e.exports=r)},1469:(e,t,a)=>{"use strict";var r;void 0===(r=function(e,t,r){var i=a(7113),o=a(8998);return function(e){e.stopPropagation();var t,a=i(e.currentTarget),r=a.parent(),n=r.find(".j_like_num"),s=parseInt(a.data("rid")),p=n.html()||0;0==g_data.login.statusCode?(a.get(0).checked?(t=1,n.html(parseInt(p)+1),r.attr("data-report-dt",0)):(t=0,n.html(parseInt(p)-1==0?"":parseInt(p)-1),r.attr("data-report-dt",1)),i.ajax({type:"POST",url:"/go/pcm/chapterReview/likeReview",data:{reviewId:s,opType:t},success:function(){}}),e.stopPropagation()):o.Login.showLoginModal()}}.call(t,a,t,e))||(e.exports=r)},4099:(e,t,a)=>{"use strict";var r;void 0===(r=function(e,t,r){var i=a(7113),o=a(8998);return function(e){e.stopPropagation();var t,a=i(e.currentTarget),r=a.closest(".j_para_comment_wrap"),n=a.parent("label"),s=a.siblings(".j_like_num"),p=s.html()||0,u=r.data("ejs"),c=u.chapterId,h=u.reviewId;0==g_data.login.statusCode?(a.get(0).checked||0===p?(t=1,s.html(parseInt(p)+1),n.attr("data-report-dt",0)):(t=2,s.html(parseInt(p)-1==0?"":parseInt(p)-1),n.attr("data-report-dt",1)),i.ajax({type:"POST",url:"/go/pcm/paragraphReview/like",data:{chapterId:c,reviewId:h,type:t},success:function(){}})):o.Login.showLoginModal()}}.call(t,a,t,e))||(e.exports=r)},3353:(e,t,a)=>{"use strict";var r;void 0===(r=function(e){var t=a(7113),r=(a(3752),"/go/pcm/chapterReview/addReview"),i={deletedAjax:!1,getCommentListAjax:!1,getCommentReplysAjax:!1},o=function(e,t){i[e]=t},n=function(e){if(i[e])return i[e]};function s(){this.reviewMap={},this.commentLastTimeQueue={},this.commentQueue={},this.reviewReplyLastTimeStore={},this.reviewReplysStore={},this.reviewReplysQueue={},this.commentNumMap={},this.userInfo={isViceModerator:0,userRole:0,isAuthor:0}}return s.prototype.addComment=function(e,t,a){var r=this;e&&t&&(r.commentQueue[t]=[],r.addCommentNum(t),a&&r.addReplyNum(a))},s.prototype.getAddUrl=function(){return r},s.prototype.deleteComment=function(e,a,r,i,s,p){if("function"!=typeof p&&(p=function(){}),"function"!=typeof i&&(i=function(){}),"function"!=typeof s&&(s=function(){}),n("deleteAjax"))p();else if(e&&a){var u=this,c={};c.reviewId=a,c.chapterId=e;var h=t.ajax({type:"POST",url:"/go/pcm/chapterReview/deleteReview",data:c,timeout:2e5,success:function(t){try{o("deleteAjax",!1),0===t.code?(u.removeCommentNum(e,a),r&&u.removeReplyNum(e,a,r),i(t)):s(t)}catch(e){console.log(e)}p()},error:function(){try{s({}),p()}catch(e){}o("deleteAjax",!1)}});o("deleteAjax",h)}else p()},s.prototype.requestChapterCommentList=function(e,a,r,i,s,p,u,c){if(n("getCommentListAjax"))c();else if("function"!=typeof c&&(c=function(){}),"function"!=typeof p&&(p=function(){}),"function"!=typeof u&&(u=function(){}),a&&void 0!==i){var h=this,l={bookId:e,chapterId:a,lastReviewId:i,orderType:s,pageIndex:this.getPageIndexChapterId(a)};r&&(l.replyId=r),h.commentQueue[a]||(h.commentQueue[a]=[]),h.commentLastTimeQueue[a]||(h.commentLastTimeQueue[a]=[]);var v=t.ajax({type:"GET",url:"/go/pcm/chapterReview/getReviewList",cache:!1,data:l||{},success:function(e){try{if(0===e.code){var t=e.data&&e.data.chapterReviewItems||[],r=e.data&&e.data.topReview||{},i=e.data&&e.data.topReply||null,n=0;r.reviewId&&(t=[r].concat(t)),i&&(h.reviewMap[i.reviewId]=i),r.topReply=i,t.forEach((function(e){var t=e.reviewId;t&&h.commentQueue[a].indexOf(t)<0&&(h.reviewMap[t]=e,h.commentQueue[a].push(t)),n=t})),n&&h.commentLastTimeQueue[a].push(n),e.data.userInfo&&(h.userInfo=e.data.userInfo),p(e.data)}else u(e)}catch(e){console.log(e)}c(),o("getCommentListAjax",!1)},error:function(){try{u(),c()}catch(e){}o("getCommentListAjax",!1)}});o("getCommentListAjax",v)}else c()},s.prototype.requestChapterCommentReplys=function(e,a,r,i,s,p,u){if(n("getCommentReplysAjax"))u();else if("function"!=typeof u&&(u=function(){}),"function"!=typeof s&&(s=function(){}),"function"!=typeof p&&(p=function(){}),a&&r&&void 0!==i){var c=this,h={bookId:e,chapterId:a,reviewId:r,lastReviewId:i,pageIndex:this.getPageIndexReviewId(r)};c.reviewReplysQueue[r]||(c.reviewReplysQueue[r]=[]),c.reviewReplysStore[r]||(c.reviewReplysStore[r]=[]),c.reviewReplyLastTimeStore[r]||(c.reviewReplyLastTimeStore[r]=[]);var l=t.ajax({type:"GET",url:"/go/pcm/chapterReview/getReviewReplys",cache:!1,data:h||{},success:function(e){try{if(0===e.code){var t=e.data&&e.data.chapterReplyItems||[],a="";t.forEach((function(e){var t=e.reviewId;t&&(c.reviewMap[t]=e,c.reviewReplysQueue[r].indexOf(t)<0&&(c.reviewReplysQueue[r].push(t),c.reviewReplysStore[r].push(t)),a=t)})),c.reviewReplyLastTimeStore[r].push(a),s(e.data)}else p()}catch(e){console.log(e)}u(),o("getCommentReplysAjax",!1)},error:function(){try{p(),u()}catch(e){}o("getCommentReplysAjax",!1)}});o("getCommentReplysAjax",l)}else u()},s.prototype.setChapterCommentNum=function(e,t){e&&t&&!this.commentNumMap[e]&&(this.commentNumMap[e]=t)},s.prototype.getReviewByReviewId=function(e){return this.reviewMap[e]||{}},s.prototype.getCommentQueueByChapterId=function(e){return this.commentQueue[e]||[]},s.prototype.clearCommentQueueByChapterId=function(e){this.commentQueue[e]=[]},s.prototype.resetCommentByChapterId=function(e){this.commentLastTimeQueue[e]=[],this.commentQueue[e]=[]},s.prototype.getLastTimeByChapterId=function(e){return this.commentLastTimeQueue[e]&&this.commentLastTimeQueue[e][this.commentLastTimeQueue[e].length-1]||0},s.prototype.getPageIndexChapterId=function(e){return this.commentLastTimeQueue[e]?this.commentLastTimeQueue[e].length+1:1},s.prototype.addCommentNum=function(e){this.commentNumMap[e]?this.commentNumMap[e]=+this.commentNumMap[e]+1:this.commentNumMap[e]=1},s.prototype.removeCommentNum=function(e,t){var a=this.getReviewByReviewId(t).replyAmount||0;this.getCommentNum(e)>a?this.commentNumMap[e]=this.getCommentNum(e)-a-1:this.commentNumMap[e]=0},s.prototype.getCommentNum=function(e){return this.commentNumMap[e]||0},s.prototype.getReplyQueueByReviewId=function(e){return this.reviewReplysQueue[e]||[]},s.prototype.clearReplyQueueByReviewId=function(e){this.reviewReplysQueue[e]=[]},s.prototype.getLastTimeByReviewId=function(e){return this.reviewReplyLastTimeStore[e]&&this.reviewReplyLastTimeStore[e][this.reviewReplyLastTimeStore[e].length-1]||0},s.prototype.getShowedReviewsNumByReviewId=function(e){return this.reviewReplysStore[e]?this.reviewReplysStore[e].length:0},s.prototype.addReplyNum=function(e){this.reviewMap[e]&&(this.reviewMap[e].replyAmount?this.reviewMap[e].replyAmount=+this.reviewMap[e].replyAmount+1:this.reviewMap[e].replyAmount=1)},s.prototype.removeReplyNum=function(e,t){this.reviewMap[t]&&(this.reviewMap[t].replyAmount>1?this.reviewMap[t].replyAmount=+this.reviewMap[t].replyAmount-1:this.reviewMap[t].replyAmount=0)},s.prototype.resetReviewByReviewId=function(e){this.reviewReplyLastTimeStore[e]=[],this.reviewReplysQueue[e]=[],this.reviewReplysStore[e]=[]},s.prototype.getPageIndexReviewId=function(e){return this.reviewReplyLastTimeStore[e]?this.reviewReplyLastTimeStore[e].length+1:1},s.prototype.getIsAuthor=function(){return 1==+this.userInfo.isAuthor||1==+this.userInfo.isViceModerator},s.prototype.stop=function(){try{n("deletedAjax")&&n("deleteAjax").abort(),n("getCommentListAjax")&&n("getCommentListAjax").abort(),n("getCommentReplysAjax")&&n("getCommentReplysAjax").abort()}catch(e){}this.reviewMap={},this.commentLastTimeQueue={},this.commentQueue={},this.reviewReplyLastTimeStore={},this.reviewReplysStore={},this.reviewReplysQueue={},this.userInfo={isViceModerator:0,userRole:0}},s}.call(t,a,t,e))||(e.exports=r)},9701:(t,a,r)=>{"use strict";var i;void 0===(i=function(t){var a=r(7113),i={deletedAjax:!1,getReviewListdAjax:!1,getReviewReplysdAjax:!1,getReviewDetailListAjax:!1,getReiewNumdAjax:!1},o=function(e,t){i[e]=t},n=function(e){if(i[e])return i[e]};function s(){this.reviewMap={},this.paragraphReviewLastTimeQueue={},this.paragraphReviewQueue={},this.reviewReplyLastTimeStore={},this.reviewReplysStore={},this.reviewReplysQueue={},this.chapterParagraphReviewNumMap={},this.chapterParagraphReviewNumArr={},this.userInfo={isViceModerator:0,userRole:0,isAuthor:0}}return s.prototype.getAddUrl=function(){return"/go/pcm/paragraphReview/add"},s.prototype.addParaComment=function(e,t,a){this.addChapterParaCommentNum(e,t),a&&this.addReviwReplyNum(a)},s.prototype.deleteParaComment=function(e,t,r,i,s,p,u){if("function"!=typeof u&&(u=function(){}),"function"!=typeof s&&(s=function(){}),"function"!=typeof p&&(p=function(){}),n("deleteAjax"))u();else if(e&&r){var c=this,h={};h.reviewId=r,h.chapterId=e;var l=a.ajax({type:"POST",url:"/go/pcm/paragraphReview/delete",data:h,timeout:2e5,success:function(a){try{o("deleteAjax",!1),u(),0===a.code?(c.removeChapterParaCommentNum(e,t,r),s(a),i&&c.removeReviwReplyNum(r,i)):p(a)}catch(e){}},error:function(){try{u(),p({})}catch(e){}o("deleteAjax",!1)}});o("deleteAjax",l)}else u()},s.prototype.requestReviewDetailByReplyId=function(e,t,r,i,s,p,u){if("function"!=typeof u&&(u=function(){}),"function"!=typeof s&&(s=function(){}),"function"!=typeof p&&(p=function(){}),n("getReviewReplysAjax"))u();else if(e&&t&&r&&void 0!==i){var c=this,h={chapterId:e,paragraphId:t,replyId:r,lastTime:i};c.paragraphReviewQueue[t]||(c.paragraphReviewQueue[t]=[]),c.paragraphReviewLastTimeQueue[t]||(c.paragraphReviewLastTimeQueue[t]=[]);var l=a.ajax({type:"GET",url:"/go/pcm/paragraphReview/getReviewDetail",cache:!1,data:h||{},success:function(e){try{if(0===e.code){var a=e.data&&e.data.topReview||null,r=e.data&&e.data.topReply||null,n=null,h=[];if(1!=+a.status&&0===i){var l="Something went wrong, please retry later";return-1==a.status||2==a.status?l="The content has been blocked":-2!=a.status&&3!=a.status||(l="The content has been deleted"),void p(l)}r&&(c.reviewMap[r.reviewId]=r),a.topReply=r,n=a||r,h=e.data&&e.data.paragraphTopicItems||[];var v=i;(h=n?[n].concat(h):h).forEach((function(e){var a=e.reviewId;a&&c.paragraphReviewQueue[t].indexOf(a)<0&&(c.reviewMap[a]=e,c.paragraphReviewQueue[t].push(a)),v=e.createTime})),v&&c.paragraphReviewLastTimeQueue[t].push(v),e.data&&e.data.userInfo&&(c.userInfo=e.data.userInfo),s(e.data)}else p()}catch(e){console.log(e)}u(),o("getReviewDetailListAjax",!1)},error:function(e){try{p(),u()}catch(e){}o("getReviewDetailListAjax",!1)}});o("getReviewDetailListAjax",l)}else u()},s.prototype.requestParagraphReivewReplys=function(t,r,i,s,p,u,c){if("function"!=typeof c&&(c=function(){}),"function"!=typeof p&&(p=function(){}),"function"!=typeof u&&(u=function(){}),n("getReviewReplysAjax"))c();else if(t&&r&&i&&void 0!==s){var h=this,l={chapterId:t,paragraphId:r,reviewId:i,lastTime:s};h.reviewReplysQueue[i]||(h.reviewReplysQueue[i]=[]),h.reviewReplysStore[i]||(h.reviewReplysStore[i]=[]),h.reviewReplyLastTimeStore[i]||(h.reviewReplyLastTimeStore[i]=[]);var v=a.ajax({type:"GET",url:"/go/pcm/paragraphReview/getReieweReplys",cache:!1,data:l||{},success:function(t){try{0===t.code?((t.data&&t.data.paragraphReviewItems||[]).forEach((function(e){var t=e.reviewId;t&&(h.reviewMap[t]=e,h.reviewReplysQueue[i].indexOf(t)<0&&(h.reviewReplysQueue[i].push(t),h.reviewReplysStore[i].push(t)))})),t.data.lastTime&&h.reviewReplyLastTimeStore[i].push(t.data.lastTime),p(t.data)):(console.log(e),u())}catch(e){console.log(e)}c(),o("getReviewReplysAjax",!1)},error:function(){try{u(),c()}catch(e){console.log(e)}o("getReviewReplysAjax",!1)}});o("getReviewReplysAjax",v)}else c()},s.prototype.requestParagraphReivews=function(e,t,r,i,s,p){if("function"!=typeof p&&(p=function(){}),"function"!=typeof i&&(i=function(){}),"function"!=typeof s&&(s=function(){}),n("getReviewListAjax"))return p(),n("getReviewListAjax");if(e&&t&&void 0!==r){var u=this,c={chapterId:e,paragraphId:t,lastTime:r};u.paragraphReviewQueue[t]||(u.paragraphReviewQueue[t]=[]),u.paragraphReviewLastTimeQueue[t]||(u.paragraphReviewLastTimeQueue[t]=[]);var h=a.ajax({type:"GET",url:"/go/pcm/paragraphReview/getReiewList",cache:!1,data:c||{},success:function(e){try{if(0===e.code){var a=e.data&&e.data.paragraphTopicItems||[],r=e.data&&e.data.topParagraphTopicItems||[];(r=r.map((function(e){return e.isHot=!0,e}))).concat(a).forEach((function(e){var a=e.reviewId;a&&u.paragraphReviewQueue[t].indexOf(a)<0&&(u.reviewMap[a]=e,u.paragraphReviewQueue[t].push(a))})),e.data.lastTime&&u.paragraphReviewLastTimeQueue[t].push(e.data.lastTime),e.data&&e.data.userInfo&&(u.userInfo=e.data.userInfo),i({isLast:e.data.isLast})}else s()}catch(e){console.log(e)}p(),o("getReviewListAjax",!1)},error:function(){try{s(),p()}catch(e){console.log(e)}o("getReviewListAjax",!1)}});o("getReviewListAjax",h)}else p()},s.prototype.requestChapterParaCommentNum=function(e,t,r,i){if("function"!=typeof i&&(i=function(){}),"function"!=typeof t&&(t=function(){}),"function"!=typeof r&&(r=function(){}),n("getReiewNumAjax"))i();else if(e){var s=this;if(void 0===s.chapterParagraphReviewNumArr[e]){s.chapterParagraphReviewNumArr[e]=[];var p={};p.chapterId=e;var u=a.ajax({type:"GET",url:"/go/pcm/paragraphReview/getReiewNum",cache:!1,data:p||{},success:function(a){try{i(),0===a.code&&((a.data&&a.data.paragraphItems||[]).forEach((function(t){var a=+t.reviewAmount||0,r=+t.authorReviewStatus||0;s.chapterParagraphReviewNumArr[e].push(t.paragraphId),s.chapterParagraphReviewNumMap[t.paragraphId]={reviewAmount:+a,authorReviewStatus:r}})),t())}catch(e){}o("getReiewNumAjax",!1)},error:function(){try{r(),i()}catch(e){}o("getReiewNumAjax",!1)}});o("getReiewNumAjax",u)}else t()}else i()},s.prototype.addChapterParaCommentNum=function(e,t){this.chapterParagraphReviewNumMap[t]?this.chapterParagraphReviewNumMap[t].reviewAmount++:this.chapterParagraphReviewNumMap[t]={reviewAmount:0}},s.prototype.removeChapterParaCommentNum=function(e,t,a){var r=this.getReviewByReviewId(a).replyAmount||0;this.getParaCommentNumByParagraphId(t)>r&&(this.chapterParagraphReviewNumMap[t].reviewAmount=this.getParaCommentNumByParagraphId(t)-r-1)},s.prototype.getParagraphIdsByChapterId=function(e){return this.chapterParagraphReviewNumArr[e]||[]},s.prototype.getParaCommentNumByParagraphId=function(e){return this.chapterParagraphReviewNumMap[e]?+this.chapterParagraphReviewNumMap[e].reviewAmount||0:(this.chapterParagraphReviewNumMap[e]={reviewAmount:0,authorReviewStatus:0},0)},s.prototype.getAuthorReviewStatusParagraphId=function(e){return+this.chapterParagraphReviewNumMap[e].authorReviewStatus||0},s.prototype.getParagraphIdsByChapterId=function(e){return this.chapterParagraphReviewNumArr[e]||[]},s.prototype.getReviewQueueByParagraphId=function(e){return this.paragraphReviewQueue[e]||{}},s.prototype.clearReviewQueueByParagraphId=function(e){this.paragraphReviewQueue[e]=[]},s.prototype.getLastTimeByParagraphId=function(e){var t=this.paragraphReviewLastTimeQueue[e]||[];return t[t.length-1]||0},s.prototype.getReplyQueueByReviewId=function(e){return this.reviewReplysQueue[e]||{}},s.prototype.clearReplyQueueByReviewId=function(e){this.reviewReplysQueue[e]=[]},s.prototype.getLastTimeByReviewId=function(e){var t=this.reviewReplyLastTimeStore[e]||[];return t[t.length-1]||0},s.prototype.getReviewByReviewId=function(e){return this.reviewMap[e]||{}},s.prototype.getShowedReviewsNumByReviewId=function(e){return this.reviewReplysStore[e]?this.reviewReplysStore[e].length:0},s.prototype.addReviwReplyNum=function(e){var t=+this.getReviewByReviewId(e).replyAmount||0;this.getReviewByReviewId(e).replyAmount=t+1},s.prototype.removeReviwReplyNum=function(e,t){this.reviewReplysStore[t]&&(this.reviewReplysStore[t]=this.reviewReplysStore[t].filter((function(t){return t!==e}))||[]);var a=+this.getReviewByReviewId(t).replyAmount||1;this.getReviewByReviewId(t).replyAmount=a-1},s.prototype.resetReviewByReviewId=function(e){this.reviewReplyLastTimeStore[e]=[],this.reviewReplysQueue[e]=[],this.reviewReplysStore[e]=[]},s.prototype.resetParagraphByParagraphId=function(e){this.paragraphReviewLastTimeQueue[e]=[],this.paragraphReviewQueue[e]=[]},s.prototype.getIsAuthor=function(){return 1===this.userInfo.isAuthor||1===this.userInfo.isViceModerator},s.prototype.stop=function(){n("deleteAjax")&&n("deleteAjax").abort(),n("getReviewReplysAjax")&&n("getReviewReplysAjax").abort(),n("getReviewListAjax")&&n("getReviewListAjax").abort(),n("getReiewNumAjax")&&n("getReiewNumAjax").abort(),n("getReviewDetailListAjax")&&n("getReviewDetailListAjax").abort(),this.paragraphReviewLastTimeQueue={},this.paragraphReviewQueue={},this.reviewReplyLastTimeStore={},this.reviewReplysQueue={},this.reviewReplysStore={}},s}.call(a,r,a,t))||(t.exports=i)},7360:(e,t,a)=>{"use strict";var r;void 0===(r=function(e){var t=a(7113),r=a(2501),i=a(3046),o=a(9026),n=a(3654);a(9985);var s={sel:".j_para_drop",apiModal:null,postError:function(){},delAction:function(){}};function p(e){t.extend(!0,this,s,e),this.init()}return p.prototype.handleDel=function(e){var t=this;new n({content:"Are you sure that you want to delete the content?",btGhost:{text:"Cancel"},bt:{text:"Delete",callback:function(){t.delAction(e)}}})},p.prototype.handleAbuse=function(e){if(!e.hasClass(".j_login")){var a=t("#abuseBookModal"),r=e.closest(".j_para_comment_wrap").data("ejs");if(a.find('[name="reviewId"]').val(r.reviewId),a.find('[name="bookId"]').val(r.bookId),a.find('[name="chapterId"]').val(r.chapterId),a.find('[name="commentType"]').val("3"),this.apiModal)this.apiModal.load();else{var n=a.data("overlay");n||(n=a.overlay().data("overlay")),n.load(),new i({$form:a,postSuccess:function(){n.close(),(new o).success("Thanks！We will review it as soon as possible.")},postError:function(e){(new o).error(e.msg||"Something went wrong, please retry later")}}),this.apiModal=n}}},p.prototype.init=function(){var e=this;new r({sel:".j_para_drop",parentScroll:".g_mod_chat_scroll",onItemClick:function(t,a){t.hasClass("j_para_del")?e.handleDel(a):t.hasClass("j_para_abuse")&&e.handleAbuse(a)}})},p}.call(t,a,t,e))||(e.exports=r)},4031:(e,t,a)=>{"use strict";var r;void 0===(r=function(e){var t=a(7113),r=a(8236),i=a(9026),o=a(3888);a(7512);var n={parentsSelector:".m-comment-ft",tplSelector:null,onValiSuccess:function(){},onBeforeAjax:function(e){return e},onSuccess:function(e){(new i).success(e.msg||"success")}};function s(e,a){t.extend(this,n,a,!0),this.$trigger=e,this.init()}return s.prototype.ajax=function(e){var a=this,r=o.getFormParams(e.serializeArray()),n=a.onBeforeAjax(r);if(!1!==n){var s=e.find('[type="submit"]'),p=e.attr("method").toUpperCase()||"GET",u=e.attr("action");s.addClass("_loading"),t.ajax({type:p,url:u,cache:!1,data:n,timeout:2e5,success:function(t){0===t.code?!1!==a.onSuccess(t)&&(s.removeClass("_loading"),e[0].reset()):(s.removeClass("_loading"),(new i).error(t.msg||"Something went wrong, please retry later"))},error:function(){s.removeClass("_loading"),(new i).error("Something went wrong, please retry later")}})}},s.prototype.init=function(){var e=this,a=t(e.tplSelector);if(a.length){var i=a.text();if(i){var o=t(t.trim(i));e.$trigger.parents(e.parentsSelector).after(o);var n=o.find("textarea").autoTextarea();o.on("reset",(function(){n[0].style.height="32px"})),new r({$form:o,valiSuccess:function(t){e.ajax(t),e.onValiSuccess(t)}})}}},t.fn.reply=function(e){var a=t(this);return a.data("reply")||a.data("reply",new s(a,e)),a},s}.call(t,a,t,e))||(e.exports=r)},6958:(e,t,a)=>{"use strict";var r;void 0===(r=function(){var e=a(7113),t=a(8998),r=a(2271),i=e(window).height(),o=e(window).width(),n="data-exposure-report",s={selector:"["+n+"]",repeatSelector:"[data-exposure-repeat]",onShow:""},p=function(e){var t=e.node,a=e.parentNode,r=void 0===a?null:a;if(!t)return!1;if(!t.getBoundingClientRect)return!1;var n=t.getBoundingClientRect(),s=n.width||t.offsetWidth,p=n.height||t.offsetHeight;if(0==s||0==p)return!1;if(r){var u=r.getBoundingClientRect(),c=r.width||r.offsetWidth,h=r.height||tparentNode.offsetHeight,l=u.top<=n.top&&u.top+h>=n.top+p;return u.left<=n.left&&u.right+c>=n.right+s&&l}var v=n.top>=0&&n.top<=i-.5*p;return n.left>=0&&n.left<=o-.5*s&&v},u=function(e){var t=e.node,a=e.parentNode,r=void 0===a?null:a,n=t.getBoundingClientRect(),s=n.width||t.offsetWidth,p=n.height||t.offsetHeight;if(0==s||0==p)return!0;if(r){var u=r.getBoundingClientRect(),c=r.width||r.offsetWidth,h=r.height||r.offsetHeight,l=u.top<=n.top&&u.top+h>=n.top+p;return!(u.left<=n.left&&u.right+c>=n.right+s&&l)}var v=n.top>=0&&(n.top+p<=0||n.top<i);return!(n.left>=0&&(n.left+s<=0||n.left<o)&&v)};function c(t,a){e.extend(!0,this,s,{parent:t?e(s.selector).parents(t).get(0):null,scrollWrap:a?e(s.selector).parents(a).get(0):null}),this.init()}return c.prototype.nodeList=[],c.prototype.init=function(){this.checkPosition();var e=this;this.parent&&this.scrollWrap?this.scrollWrap.addEventListener("scroll",t.commonMethods.throttle((function(){e.checkPosition()}),100,100)):window.addEventListener("scroll",t.commonMethods.throttle((function(){e.checkPosition()}),100,100))},c.prototype.isInScreen=function(e){return p({node:e,parenNode:this.parent})},c.prototype.isNotInScreen=function(e){return u({node:e,parenNode:this.parent})},c.prototype.checkPosition=function(){var t=null;this.nodeList=e(this.selector);for(var a=0,r=this.nodeList.length;a<r;a++)(t=this.nodeList[a])&&this.isInScreen(t)&&(this.sendReport(t),t.removeAttribute(n));this.repeatNodeList=e(this.repeatSelector).not(this.selector);for(var i=0,o=this.repeatNodeList.length;i<o;i++){var s=this.repeatNodeList[i];s&&this.isNotInScreen(s)&&s.setAttribute(n,"")}},c.prototype.sendReport=function(e){r.send({target:e},{ltype:"C"},!0)},c.isInScreen=p,c.isNotInScreen=u,c}.call(t,a,t,e))||(e.exports=r)},7512:(e,t,a)=>{"use strict";var r;void 0===(r=function(e){var t=a(7113),r={watchInput:"input.height propertychange.height paste.height cut.height"};function i(e,a){if(!e.length)return!1;t.extend(!0,this,r,a),this.$it=e,this.init()}return i.prototype.init=function(){var e=this,t=e.$it;e.autoHeight(t),t.off(e.watchInput).on(e.watchInput,(function(){e.autoHeight(t)}))},i.prototype.autoHeight=function(e){e.css({height:0}).css({height:e[0].scrollHeight})},t.fn.autoTextarea=function(e){var a=t(this);return a.data("autoTextarea")||a.data("autoTextarea",new i(a,e)),a},i}.call(t,a,t,e))||(e.exports=r)},3888:(e,t,a)=>{"use strict";var r;void 0===(r=function(e,t,r){var i=a(7113);return{getFormParams:function(e){var t={};return i.each(e,(function(){t[this.name]?(t[this.name].push||(t[this.name]=[t[this.name]]),t[this.name].push(i.trim(this.value)||"")):t[this.name]=i.trim(this.value)||""})),t}}}.call(t,a,t,e))||(e.exports=r)},1249:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(7113),i={};function o(e,t){if(!e.length)return!1;r.extend(!0,this,i,t||{}),this.$it=e,this.init()}o.prototype.init=function(){var e=this.$it;e.addClass("g_loading_box"),e.children(".g_loading").length||e.append('<span class="g_loading _auto"><i></i></span>')},o.prototype.loading=function(){this.$it.addClass("_loading")},o.prototype.unloading=function(){this.$it.removeClass("_loading")},r.fn.loadingBox=function(e){var t=r(this);return t.data("loadingBox")||t.data("loadingBox",new o(t,e)),t};var n=o;t.default=n},8236:(e,t,a)=>{"use strict";var r;void 0===(r=function(e,t,r){var i=a(7113),o={$form:!1,isError:!1,watchInput:"input.auto propertychange.auto paste.auto cut.auto",errorSel:"._error",errorCla:"_error",valiWatching:!1,textSel:"textarea",errorTxt:"Reply should not be less than 140 characters",valiSuccess:null};function n(e){e.$form&&(i.extend(!0,this,o,e),this.$error=this.$form.find(this.errorSel),this.$btSub=this.$form.find('button[type="submit"]'),this.$text=this.$form.find(this.textSel),this.init())}return n.prototype.init=function(){var e=this,t=e.$form,a=e.$btSub;t.attr("novalidate","novalidate").off("submit.vali").on("submit.vali",(function(r){r.preventDefault(),!e.valiWatching&&e.valiWatch(),"function"==typeof e.valiSuccess&&(a.attr("disabled","disabled"),e.valiSuccess(t))})),e.$text.off(e.watchInput).on(e.watchInput,(function(t){!e.isError&&this.value&&i.trim(this.value)?a.removeAttr("disabled"):a.attr("disabled","disabled")}))},n.prototype.showError=function(e){var t=this,a=t.$btSub;t.$error.text(e),t.$form.addClass(t.errorCla),t.isError=!0,a.removeAttr("disabled")},n.prototype.resetError=function(){var e=this;e.$form.removeClass(e.errorCla),e.isError=!1},n.prototype.valiWatch=function(){var e=this;e.$text.on("focus.vali input.vali blur.vali",(function(){e.resetError()})),e.valiWatching=!0},n.prototype.valiWatchOff=function(){console.log("valiWatchOff"),this.$text.off("focus.vali input.vali").off("blur.vali"),this.valiWatching=!1},n}.call(t,a,t,e))||(e.exports=r)}}]);