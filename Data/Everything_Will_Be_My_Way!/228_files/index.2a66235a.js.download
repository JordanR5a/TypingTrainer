(()=>{var t={6898:(t,a,e)=>{"use strict";var o;void 0===(o=function(t,a,o){var r=e(7113),n=e(1675),i=e(3046),s=(e(3132),e(9026)),d={$modal:r("#editionAbuseModal"),dropSel:".j_edition_abuse_drop",modalTriggerSel:".j_edition_abuse_modal",dropTriggerSel:".j_edition_abuse",onDropShow:function(t){}};function l(t){r.extend(!0,this,d,t),this.init()}return l.prototype.initModal=function(){var t=this.$modal,a=new n({$modal:t,needLogin:!0,btSel:this.modalTriggerSel});a.firstShow=function(t,e){new i({$form:t,postSuccess:function(t){a.close(),(new s).success("Thanks！We will review it as soon as possible.")},postError:function(t){(new s).error(t.msg)}})},this.modalApi=a},l.prototype.updateFormDataByTrigger=function(t){var a=this.$modal,e=t.closest(".j_mtl_edition_wrap").data("ejs");a.find('[name="againstUserId"]').val(e.userId),a.find('[name="chapterId"]').val(e.chapterId),a.find('[name="contentId"]').val(e.contentId),a.find('[name="bookId"]').val(e.bookId)},l.prototype.getDropApi=function(t){var a=this,e={eventType:"click",position:"3-2",offsets:{x:8,y:6},edgeAdjust:!1,onShow:function(t,e){var o=this;e.off("click.drop").on("click.drop","a",(function(t){o.hide()})),e.find(a.modalTriggerSel).off("click.dropModal").on("click.dropModal",(function(e){a.updateFormDataByTrigger(t)})),a.onDropShow(o)}};return t.drop(r(a.dropSel),e),t.data("drop")},l.prototype.initDrop=function(){var t=this;r(document).on("click.drop",t.dropTriggerSel,(function(a){a.preventDefault();var e=r(this);!r(this).data("drop")&&t.getDropApi(e).show()}))},l.prototype.init=function(){this.initModal(),this.initDrop()},l}.call(a,e,a,t))||(t.exports=o)},9920:(t,a,e)=>{"use strict";var o,r=e(5318)(e(485));void 0===(o=function(t,a,o){var n=e(7113),i=e(9209),s=e(7398),d=e(9981),l=e(5118),c=e(8998),p=e(3888),h=(e(7235),e(9026)),g=e(797),u=e(582),m=e(4519),f=(e(2134),e(435)),_=e(2516),v=e(1025),C=e(6798),I=e(1956),b=e(5851),P=e(4219),y=e(4479),w=e(5599),k=e(8833),S=e(2551),j=e(8110),x=e(2892),T=e(2058),A=e(261),L=e(1656),N=e(4368),E=e(5265),D=e(5158),M=e(8415),$=e(3035),R=e(6958);e(9985);var B=e(4988).default,U=e(5476).default,O=e(6894).default,q={"-1":1,15:1,20:1,25:1,35:1,30:0,40:0,45:0,50:0};o.exports=s.inherit({el:"body",events:{"click .theme-set-color input":"setColor","click .theme-set-font input":"setFont","click .theme-set-paragraph-switch input":"setParagraphSwitch","click.update .cha-modal ._close":"closePanel","click.update .cha-fly .j_modal":"updateChapPosition","click .g_bt_add_lib":_,"click .j_retry":"retryGetContent","click .j_unlockChapter":"skipAdByStone","click .j_unlock_fp":"skipAdByStone","mouseenter .stone-drop":"reportOnWhat","click .j_vote_power":"postVotePS","click .j_share_book":"shareToVote"},elements:{},render:function(){return this.setElement(this.el),this.init(),this},init:function(){var t=this;(new D).getDataAndSetData(),new T,new P,this.initGift({bookId:g_data.bookId,novelType:0}),new M,new y,t.ChapterStore=new S({bookId:g_data.bookId}),g_data.chapInfo&&g_data.chapInfo.chapterInfo&&g_data.chapInfo.chapterInfo.chapterId&&t.ChapterStore.setChapterInfo(g_data.chapInfo.chapterInfo.chapterId,g_data.chapInfo.chapterInfo),this.globalParams={nextChapterId:g_data.nextcId,prevChapterId:g_data.precId,doc$:n(document),win$:n(window),chapIdx$:n(".j_chapIdx"),chapName$:n(".j_chapName"),curProgress$:n(".j_progress"),curChap$:n(".j_curChap"),currChapId:g_data.firstChap.id,currChapIdxInArr:0,chapterLevel:g_data.firstChap.chapterLevel,stillLoadChap:!1,vipAds:[],videoTimer:[],ss:parseInt(n(".j_ss_stone").data("ss"))},g_data.currChapId=this.globalParams.currChapId,this.adSlotArr={},"undefined"!=typeof adSlot&&(this.adSlotArr["chapter-ad-"+g_data.firstChap.id]=adSlot),this.getChapterInfoAjaxCache=[],this.initPageResize(),-1!=this.globalParams.nextChapterId&&this.getChapterInfo(this.globalParams.nextChapterId,n(".j_chapterLoading"),(function(a){t.getNextChapterSucc(a)})),-1!=this.globalParams.prevChapterId&&this.getChapterInfo(t.globalParams.prevChapterId,n(".j_loading_top"),(function(a){t.getPrevChapterSucc(a)})),-1==this.globalParams.prevChapterId&&-1==this.globalParams.nextChapterId||this.initChapterScroll(),-1==this.globalParams.nextChapterId&&n(".j_privilege_bar_wrap").data("end",1),setTimeout((function(){t.getNewList()}),0),n(".j_theme_setting")[0].reset(),new w({$box:n(".theme-set"),$target:n("html"),$sizeTarget:n(".j_contentWrap"),upDnOpt:{boxSel:".theme-set-upDown",upSel:"._add",dnSel:"._red"},changeRule:{tc:"_color",tf:"_font",paragraphSwitch:1,ts:function(a,e,o,r){a.$sizeTarget.css("font-size",r+"px"),t.updateChapPosition(o),t.setFontSize(r)}}}),this.forbidCopy(),this.initFirstChapInfo(),this.initRev(),this.ChapterCommentApi=new L(g_data.bookId,g_data.firstChap),this.loginConfig(),new f({sel:".cha-modal-bd"}),this.setReadingProgress(g_data.bookId,g_data.firstChap.id),0==g_data.login.statusCode&&c.commonMethods.checkInLibrary(),this.initKeyboardSupport(),this.initShareToVote();var a=+g_data.checkLevel,e=+g_data.actionStatus;a&&a>=15&&!q[e]&&this.initPowerVote(),this.handleChargeClose(),this.apiCatalog=new $({isPreload:""+this.globalParams.nextChapterId=="-1",getChapterId:function(){return t.globalParams.currChapId},onChapterChange:function(a){t.goToChapter(a)}}),new E,t.ParaOperationGroupAPI=new A({bookId:g_data.bookId}),t.ParaCommentAPI=new j(g_data.bookId),t.ParaCommentAPI.setStatus(g_data.paragraphSwitch),t.ParaCommentAPI.initChapterParaComment(this.globalParams.currChapId),t.ParaOperationGroupAPI.togglePara(+g_data.paragraphSwitch),g_data.isTranslateMode&&(t.MachineEditAPI=new x,t.ParaOperationGroupAPI.toggleMtl(1==+g_data.isWhiteUser&&1==+g_data.isTranslateMode)),t.PopTipsAPI=new N;var o=window.qdReportUtm=this.qdReportUtm=function(t){for(var a=t?t.split("&"):[],e={},o=0;o<a.length;o++){var r=a[o].substring(0,a[o].indexOf("="));if(-1!=r.indexOf("utm")){var n=a[o].substring(a[o].indexOf("=")+1);e[r]=n}}return e}(d.get("QDReport_utm"));this.scrolledChapters=0;try{fbq("track","ViewContent",{value:0,currency:"USD",content_ids:[g_data.bookId],content_type:"product"}),"google"===o.utm_source&&ga("send","Read Novel")}catch(t){}try{"facebook"!==this.qdReportUtm.utm_source&&"google"!==this.qdReportUtm.utm_source||setTimeout((function(){c.Report.send({target:null},{ltype:"A",eid:"qi_A_readChapters",extend:JSON.stringify({chapters:1})},!0)}),1e3)}catch(t){}new R,Report.send({target:null},{ltype:"P",l1:1,eid:"qi_P_reader",pdt:"reader",pdid:g_data.bookId,blocktitle:g_data.currChapId}),r.default.init(),r.default.reportAndStartNext({bookType:0,bookId:g_data.bookId,chapterId:g_data.currChapId})},handleChargeClose:function(){n(document).on("click",".chargeForm .j_close, .chargeForm .j_confirmBtDefault, .chargeForm .j_confirmBtGhost",(function(){location.reload()}))},initPowerVote:function(){var t=this;this.initPowerVoteModal();var a=n(".j_power_rank_wrap"),e=n("#powerVoteModal");this.powerStoneApi=new C({$powerRankWrap:a,bookId:g_data.bookId,bookName:g_data.bookName,novelType:0,getRankInfoSucc:function(o){if(o.data){var r=n.extend(!0,{powerRankInfo:o.data},{staticConf:{domainPrefix:g_data.env,staticPath:g_data.staticPath}},{data:{user:g_data.login.user}},{bookId:g_data.bookId,bookType:+g_data.bookType,bookName:g_data.bookName,chapterId:t.globalParams.currChapId},g);a.html(i.render(U,r)),e.html(i.render(B,r))}}}),this.powerStoneApi.getRankInfo()},initGift:function(t){-1!=+g_data.giftNum&&(this.gift=new u("",t),new m("",t),n(document).on("gift_success",(function(t,a){a.giftName})))},initPowerVoteModal:function(){var t=this;t._powerModApi=!1,n(document).on("click",".j_trigger_power_modal",(function(a){a.preventDefault(),t.$powerVoteTrigger=n(this),t._powerModApi?t._powerModApi.load():t._powerModApi=n("#powerVoteModal").overlay({load:!0}).data("overlay")}))},initShareToVote:function(){this.shareBookApi=new b({bookId:g_data.bookId,bookName:g_data.bookName,guid:g_data.login&&g_data.login.user&&g_data.login.user.guid,userName:g_data.login&&g_data.login.user&&g_data.login.user.userName})},initKeyboardSupport:function(){var t=this;I.bind("right",(function(){var a,e=0;n(".chapter_content").each((function(a,o){n(o).hasClass("j_chapter_"+t.globalParams.currChapId)&&(e=a)})),t.chapInfoArr[e]&&(a=t.chapInfoArr[e].nextId,t.switchChapter(a))})),I.bind("left",(function(){var a,e=0;n(".chapter_content").each((function(a,o){n(o).hasClass("j_chapter_"+t.globalParams.currChapId)&&(e=a)})),t.chapInfoArr[e]&&(a=t.chapInfoArr[e].prevId,t.switchChapter(a))}))},switchChapter:function(t){var a,e,o=this;if(t&&-1!=t){(a=this.chapInfoArr.filter((function(a){return a.id==t})))&&a.length?(e=a[0].name+"",n(window).scrollTop(a[0].start||0)):(n(".j_loading_top").addClass("_loading"),this.clearAliveChapterAjax(),this.getChapterInfo(t,n(".j_loading_top"),(function(t){o.renderNewChapter(t)})));var r=g.getChapterUrl(null,g_data.bookId,t,g_data.bookName,e,g.bookTypes.NOVEL);history.replaceState?history.replaceState(null,null,r):location.href=r}},initgdata:function(){var t=g_data.chapInfo.chapterInfo,a=g_data.chapInfo.bookInfo;g_data.nextcId=t.nextChapterId,g_data.firstChapterIndex=t.firstChapterIndex,g_data.precId=t.preChapterId,g_data.bookId=a.bookId,g_data.bookName=a.bookName,g_data.tChapCnt=a.totalChapterNum,g_data.firstChap={id:t.chapterId,idx:t.chapterIndex,name:t.chapterName,comNum:t.reviewTotal,vip:t.isVip,auth:t.isAuth,chapterLevel:t.chapterLevel},g_data.adId=a.adId,g_data.bookInfo=a},loginConfig:function(){var t=this;c.Login.success=function(a){c.commonMethods.loginRedirect(a,(function(){t.loginSuccess()}))},c.Login.autoSuccess=function(){t.loginSuccess()}},loginSuccess:function(){location.reload()},checkAuthAfterLogin:function(t){var a=n(".j_lock_chap_"+t);a.length&&a.find(".cha-content").hasClass("_lock")&&this.getAuthContent(a,t)},getAuthContent:function(t,a){var e=this;this.getChapterInfo(a,n(".j_loading_top"),(function(a){0===a.code&&a.data.chapterInfo.isAuth&&(t.find(".j_locked_chap").addClass("_loading"),setTimeout((function(){e.replaceAuthChapter(a.data.chapterInfo.chapterId,{contents:a.data.chapterInfo.contents,isRichFormat:a.data.chapterInfo.isRichFormat,isTranslateMode:g_data.isTranslateMode})}),500))}),(function(){t.find(".j_locked_chap").addClass("_loading"),setTimeout((function(){t.find(".j_locked_chap").removeClass("_loading").addClass("_failed")}),500),t.find(".j_retry_auth_content").removeClass("j_retry_auth_content").addClass("j_retry_auth_content_stone"),t.find(".j_retry_auth_content_stone").on("click",(function(){e.getAuthContent(t,a)}))}))},initFirstChapInfo:function(){g_data.firstChap.start=0,g_data.firstChap.end=this.globalParams.doc$.height(),this.chapInfoArr=[],this.recordChapInfo(g_data.firstChap)},initRev:function(){-1==this.globalParams.nextChapterId&&new l({btSel:".j_review",onBeforeShow:function(){if(0!=g_data.login.statusCode)return c.Login.showLoginModal(),!1},revSuccess:function(t,a){a.addClass("_success")[0].reset()},onClose:function(t){t.getOverlay().removeClass("_success")}})},resetTheme:function(){if(d.get("tc")){switch(d.get("tc")){case"_color1":n("._default").find("input").prop("checked",!0);break;case"_color2":n("._yellow").find("input").prop("checked",!0);break;case"_color3":n("._dark").find("input").prop("checked",!0)}n("html").addClass(d.get("tc"))}if(d.get("tf")){switch(d.get("tf")){case"_font1":n("._ari").find("input").prop("checked",!0);break;case"_font2":n("._mer").find("input").prop("checked",!0)}n("html").addClass(d.get("tf"))}d.get("ts")&&(n("#j_size").val(d.get("ts")),n(".j_contentWrap").css("font-size",d.get("ts")+"px"))},setColor:function(t){var a=n(t.currentTarget);d.set("tc",a.val(),".webnovel.com","/",31536e6),this.setSettingOnServer()},setFont:function(t){var a=n(t.currentTarget);d.set("tf",a.val(),".webnovel.com","/",31536e6),this.setSettingOnServer()},setFontSize:function(t){d.set("ts",t,".webnovel.com","/",31536e6),this.setSettingOnServer()},setParagraphSwitch:function(t){var a=this,e=t.currentTarget.checked?1:0;a.ParaCommentAPI.setStatus(e),a.ParaCommentAPI.initChapterParaComment(a.globalParams.currChapId),a.ParaOperationGroupAPI.togglePara(e),d.set("paragraphSwitch",e,".webnovel.com","/",31536e6),this.setSettingOnServer()},setSettingOnServer:function(){if(0==g_data.login.statusCode){var t=n(".j_theme_setting"),a=p.getFormParams(t.serializeArray());void 0===a.paragraphSwitch&&(a.paragraphSwitch=0),n.ajax({method:"POST",url:"/apiajax/book/SetReadingSettings",data:a,success:function(t){}})}},closePanel:function(){this.updateChapPosition()},getNewList:function(){var t=n(".j_update_list");n.ajax({type:"GET",url:"/go/pcm/recommend/getRecommendList",cache:!1,data:{type:2,bookId:g_data.bookId},success:function(a){0===a.code&&t.html(i.render(O,n.extend({},a,g,{env:g_data.env,staticConf:{staticPath:g_data.staticPath,domainPrefix:g_data.env,imgPh:e(4610)},bookId:g_data.bookId,userId:g_data.login.user.userId})))}})},addNextChapter:function(){var t,a,e=n(".j_contentWrap"),o=n(".j_bottom"),r=this,i=n(".chapter_content:last");t=i.length?i.offset().top+i.height():0,e.append(this.globalParams.chapTpl),n(".j_fp_stone").html(g_data.login.user.fastPass),this.globalParams.chapBotTpl&&(o.append(this.globalParams.chapBotTpl),new l({btSel:".j_review",onBeforeShow:function(){if(0!=g_data.login.statusCode)return c.Login.showLoginModal(),!1;n("#reviewModal #j_read_status").html("Reading Status: C"+r.globalParams.chapIdx)},revSuccess:function(t,a){a.addClass("_success")[0].reset()},onClose:function(t){t.getOverlay().removeClass("_success")}}),this.globalParams.chapBotTpl=null,n(".j_privilege_bar_wrap").data("end",1),1==n(".j_privilege_bar_wrap").data("show")&&n(".j_privilege_bar_wrap").removeClass("dn"),n(".j_power_rank_wrap").removeClass("dn"),n(".gift-bar-in-chapter").removeClass("dn"),n(".j_update_list").removeClass("dn"),n(".gift-bar-in-chapter .j_btn_gift").attr("data-report-cid",this.globalParams.chapId).attr("data-cid",this.globalParams.chapId)),a=(i=n(".chapter_content:last")).offset().top+i.height(),this.recordChapInfo({id:this.globalParams.chapId,name:this.globalParams.chapName,idx:this.globalParams.chapIdx,order:this.globalParams.chapOrderIdx,comNum:this.globalParams.comNum,auth:this.globalParams.auth,vip:this.globalParams.vip,start:t,end:a,nextId:this.globalParams.currNextId,prevId:this.globalParams.currPrevId,chapterLevel:this.globalParams.chapterLevel}),this.globalParams.lastChapId=this.globalParams.chapId;var s=this.getChapterAdId(102);s&&this.addAdvertise("chapter-ad-"+this.globalParams.chapId,s,[728,90])},clearAliveChapterAjax:function(){for(var t=this.getChapterInfoAjaxCache.length,a=0;a<t;a++)try{4!==this.getChapterInfoAjaxCache[a].readyState&&this.getChapterInfoAjaxCache[a].abort()}catch(t){}this.getChapterInfoAjaxCache=[]},getChapterInfo:function(t,a,e,o){if(!(t<=0)){var r=this;r.globalParams.stillLoadChap=!0;var i=n.ajax({method:"GET",url:"/go/pcm/chapter/getContent",cache:!1,data:{bookId:g_data.bookId,chapterId:t},success:function(t){0===t.code?(r.globalParams.stillLoadChap=!1,a.removeClass("_loading"),t.data&&t.data.chapterInfo&&-1==t.data.chapterInfo.nextChapterId&&c.Report.send({target:null},{eid:"qi_D22"},!0),g_data.membershipStatus=t.data.membershipStatus,g_data.waitpayStatus=t.data.waitpayStatus,t.data.chapterInfo&&t.data.chapterInfo.chapterId&&r.ChapterStore.setChapterInfo(t.data.chapterInfo.chapterId,t.data.chapterInfo),e(t)):"function"==typeof o?o(t):a.removeClass("_loading").addClass("_failed")},error:function(t){console.log("error",t),a.removeClass("_loading").addClass("_failed")}});r.getChapterInfoAjaxCache.push(i)}},retryGetContent:function(t){var a=n(t.currentTarget),e=this;a.parents(".j_chapterLoading").removeClass("_failed"),this.getChapterInfo(this.globalParams.nextChapterId,n(".j_chapterLoading"),(function(t){e.getNextChapterSucc(t)}))},getNextChapterSucc:function(t){this.globalParams.chapId=t.data.chapterInfo.chapterId,this.globalParams.chapName=t.data.chapterInfo.chapterName,this.globalParams.chapIdx=t.data.chapterInfo.chapterIndex,this.globalParams.chapOrderIdx=t.data.chapterInfo.orderIndex,this.globalParams.comNum=t.data.chapterInfo.reviewTotal,this.globalParams.auth=t.data.chapterInfo.isAuth,this.globalParams.vip=t.data.chapterInfo.isVip,this.globalParams.lastChapId=null,this.globalParams.currNextId=t.data.chapterInfo.nextChapterId,this.globalParams.currPrevId=t.data.chapterInfo.preChapterId,this.globalParams.actionStatus=t.data.bookInfo.actionStatus,this.globalParams.nextChapterId=t.data.chapterInfo.nextChapterId,this.globalParams.chapterLevel=t.data.chapterInfo.chapterLevel,this.globalParams.chapTpl=i.render("#chapter-content.html",n.extend(t.data,{isOriginal:g_data.isOriginal},{staticPath:g_data.staticPath,env:g_data.env,statusCode:g_data.login.statusCode,showTopSplit:!0,showBottomSplit:!1,adId:this.getChapterAdId(102),isTranslateMode:g_data.isTranslateMode,isWhiteUser:g_data.isWhiteUser},{data:{statusCode:g_data.login.statusCode,user:g_data.login.user,membershipStatus:g_data.membershipStatus,waitpayStatus:g_data.waitpayStatus}},g)),-1==this.globalParams.nextChapterId&&(this.globalParams.chapBotTpl=i.render("#content-bottom.html",n.extend(t.data,{env:g_data.env,staticPath:g_data.staticPath,statusCode:g_data.login.statusCode})),this.addNextChapter()),n(window).trigger("scroll")},getPrevChapterSucc:function(t){this.globalParams.pChapId=t.data.chapterInfo.chapterId,this.globalParams.pChapName=t.data.chapterInfo.chapterName,this.globalParams.pChapIdx=t.data.chapterInfo.chapterIndex,this.globalParams.pChapOrderIdex=t.data.chapterInfo.orderIndex,this.globalParams.pComNum=t.data.chapterInfo.reviewTotal,this.globalParams.pAuth=t.data.chapterInfo.isAuth,this.globalParams.pVip=t.data.chapterInfo.isVip,this.globalParams.pLastChapId=null,this.globalParams.pCurrNextId=t.data.chapterInfo.nextChapterId,this.globalParams.pCurrPrevId=t.data.chapterInfo.preChapterId,this.globalParams.prevChapterId=t.data.chapterInfo.preChapterId,this.globalParams.prevChapTpl=i.render("#chapter-content.html",n.extend(t.data,{isOriginal:g_data.isOriginal},{staticPath:g_data.staticPath,env:g_data.env,statusCode:g_data.login.statusCode,showTopSplit:!1,showBottomSplit:!0,adId:this.getChapterAdId(102),isTranslateMode:g_data.isTranslateMode,isWhiteUser:g_data.isWhiteUser},{data:{statusCode:g_data.login.statusCode,user:g_data.login.user,membershipStatus:g_data.membershipStatus,waitpayStatus:g_data.waitpayStatus}},g))},addPrevChapter:function(){var t,a,e=n(".j_contentWrap"),o=n(window),r=o.scrollTop(),i=n(".chapter_content:last");t=i.offset().top+i.height(),e.prepend(this.globalParams.prevChapTpl),this.globalParams.prevChapTpl=null,a=(i=n(".chapter_content:last")).offset().top+i.height(),o.scrollTop(r+a-t),this.recordChapInfo({id:this.globalParams.pChapId,name:this.globalParams.pChapName,idx:this.globalParams.pChapIdx,order:this.globalParams.pChapOrderIdex,comNum:this.globalParams.pComNum,auth:this.globalParams.pAuth,vip:this.globalParams.pVip,start:0,end:a-t,nextId:this.globalParams.pCurrNextId,prevId:this.globalParams.pCurrPrevId,chapterLevel:this.globalParams.chapterLevel},!0),this.updateChapPosition(),this.globalParams.pLastChapId=this.globalParams.pChapId;var s=this.getChapterAdId(102);s&&this.addAdvertise("chapter-ad-"+this.globalParams.pChapId,s,[728,90]),this.PopTipsAPI.refresh()},initPageResize:function(){var t=this;n(window).on("resize",t.throttle((function(a){t.updateChapPosition()}),100,100))},isInitChapterScroll:!1,initChapterScroll:function(){var t=this;t.isInitChapterScroll||(t.isInitChapterScroll=!0,new k({supportScrollPrev:!0,mustDoneOnScroll:function(){t.updateWhenScroll(t.globalParams.win$.scrollTop()+t.globalParams.win$.height()/2.5)},onLoadingNext:function(){-1!=t.globalParams.nextChapterId&&(t.globalParams.stillLoadChap?n(".j_chapterLoading").addClass("_loading"):t.globalParams.lastChapId!=t.globalParams.chapId?(t.addNextChapter(),t.getChapterInfo(t.globalParams.nextChapterId,n(".j_chapterLoading"),(function(a){t.gift&&t.gift.initGiftGuideTip(),t.getNextChapterSucc(a)}))):console.log("loading the same next chapter.."))},onLoadingPrev:function(){-1!=t.globalParams.prevChapterId?t.globalParams.stillLoadChap?n(".j_loading_top").addClass("_loading"):t.globalParams.pLastChapId!=t.globalParams.pChapId&&(t.addPrevChapter(),t.getChapterInfo(t.globalParams.prevChapterId,n(".j_loading_top"),(function(a){t.gift&&t.gift.initGiftGuideTip(),t.getPrevChapterSucc(a)}))):t.globalParams.prevChapTpl&&t.addPrevChapter()}}))},recordChapInfo:function(t,a){this.chapInfoArr&&this.chapInfoArr.length||(this.chapInfoArr=[]),a?this.chapInfoArr.unshift(t):this.chapInfoArr.push(t)},forbidCopy:function(){n(".cha-page").on("copy contextmenu",(function(){return!1}))},throttle:function(t,a,e){var o,r=new Date;return function(){var n=this,i=arguments,s=new Date;clearTimeout(o),s-r>=e?(t.apply(n,i),r=s):o=setTimeout(t,a)}},updateWhenScroll:function(t){for(var a=this,e=0;e<this.chapInfoArr.length;e++)if(this.chapInfoArr[e].start<=t&&t<=this.chapInfoArr[e].end){if(this.chapInfoArr[e].id==this.globalParams.currChapId)break;"local"!=g_data.env&&this.updateCurrUrl(this.chapInfoArr[e].id,this.chapInfoArr[e].name),setTimeout((function(){c.Report.send({target:null},{ltype:"A",eid:"qi_R99",bid:g_data.bookId,cid:a.chapInfoArr[e].id},!0)}),200),this.updateLockChapContent(this.chapInfoArr[e].id,e),this.updateHeaderInfo(e),this.apiCatalog&&"function"==typeof this.apiCatalog.changeCurrentId&&this.apiCatalog.changeCurrentId(this.chapInfoArr[e].id),this.setReadingProgress(g_data.bookId,this.chapInfoArr[e].id),this.globalParams.currChapId=this.chapInfoArr[e].id,this.globalParams.currChapIdxInArr=e,g_data.currChapId=this.globalParams.currChapId,Report.send({target:null},{ltype:"P",l1:1,eid:"qi_P_reader",pdt:"reader",pdid:g_data.bookId,blocktitle:g_data.currChapId}),r.default.reportAndStartNext({bookType:0,bookId:g_data.bookId,chapterId:g_data.currChapId}),this.ParaCommentAPI.initChapterParaComment(this.globalParams.currChapId),this.ChapterCommentApi.checkoutCommentByChapterId(this.globalParams.currChapId,this.chapInfoArr[e]);try{googletag&&googletag.cmd&&a.adsControlWhenScroll("chapter-ad-"+a.globalParams.currChapId)}catch(t){console.error(t.toString())}if(3===this.chapInfoArr.length)try{"facebook"===this.qdReportUtm.utm_source&&fbq("track","StartTrial"),"google"===this.qdReportUtm.utm_source&&ga("send","Read 3 Chapters")}catch(t){}try{"facebook"!==this.qdReportUtm.utm_source&&"google"!==this.qdReportUtm.utm_source||setTimeout((function(){c.Report.send({target:null},{ltype:"A",eid:"qi_A_readChapters",extend:JSON.stringify({chapters:a.chapInfoArr.length})},!0)}),1e3)}catch(t){}break}},updateCurrUrl:function(t,a){var e;history.replaceState&&(e=g.getChapterUrl(null,g_data.bookId,t,g_data.bookName,a,g.bookTypes.NOVEL),history.replaceState(null,null,e))},updateLockChapContent:function(t,a){var e=this,o=n(".j_lock_chap_"+t);o.length&&o.find(".cha-content").hasClass("_lock")?this.chapInfoArr[a].auth=0:this.chapInfoArr[a].auth=1,0!=this.chapInfoArr[a].vip&&0==this.chapInfoArr[a].auth&&(c.Report.send({target:null},{ltype:"H",pid:"qi_p_AD",bid:g_data.bookId,cid:this.globalParams.currChapId},{}),0==g_data.login.statusCode&&n.ajax({method:"GET",url:"/go/pcm/chapter/getContent",cache:!1,data:{bookId:g_data.bookId,chapterId:e.chapInfoArr[a].id},success:function(t){0!==t.code||!t.data.chapterInfo.isAuth&&0!=t.data.chapterInfo.price||(t.data.chapterInfo&&t.data.chapterInfo.chapterId&&e.ChapterStore.setChapterInfo(t.data.chapterInfo.chapterId,t.data.chapterInfo),o.find(".j_locked_chap").addClass("_loading"),setTimeout((function(){e.replaceAuthChapter(t.data.chapterInfo.chapterId,{contents:t.data.chapterInfo.contents,isRichFormat:t.data.chapterInfo.isRichFormat})}),500))}}))},updateHeaderInfo:function(t){0==this.chapInfoArr[t].chapterLevel&&(this.chapInfoArr[t].idx>=0?this.globalParams.chapIdx$.html("Chapter "+this.chapInfoArr[t].idx+":"):this.globalParams.chapIdx$.html(""),this.globalParams.curProgress$.html(Math.floor(this.chapInfoArr[t].order/g_data.tChapCnt*1e4)/100+"%"),this.globalParams.chapName$.html(this.chapInfoArr[t].name))},setReadingProgress:function(t,a){if(0==g_data.login.statusCode){var e=this.chapInfoArr.filter((function(t){return t.id==a})),o=0;if(e&&e.length&&(o=e[0].chapterLevel),0!=+o)return;n.ajax({type:"POST",url:"/go/pcm/library/setReadingProgressAjax",data:{bookId:t,chapterId:a},success:function(t){}})}},updateCommentsReport:function(t){n(".cha-fly").find(".j_comments").data("cid",t)},goPrevChap:function(){this.globalParams.win$.scrollTop()},updateChapPosition:function(t){var a=n(".j_splitLine"),e=this;0!=a.length?(n.each(a,(function(t,o){e.chapInfoArr[t].end=n(o).offset().top,t+1==a.length&&(e.chapInfoArr[t+1].end=e.globalParams.doc$.height()),e.chapInfoArr[t+1].start=e.chapInfoArr[t].end})),n(window).trigger("scroll")):e.chapInfoArr[0].end=e.globalParams.doc$.height()},getChapterAdId:function(t){var a="",e=n("#chapterAds").val();try{e&&(e=JSON.parse(e),a=g.getRandomAds(e,t))}catch(t){console.log(t.toString())}return a},addAdvertise:function(t,a,e){var o=this;o.adSlotArr=o.adSlotArr||[],a=a||o.getChapterAdId(102),e=e||[728,90];try{googletag&&googletag.cmd&&n("#"+t).length&&googletag.cmd.push((function(){if(!o.adSlotArr[t]){var r=googletag.defineSlot(a,e,t);r&&(o.adSlotArr[t]=r,r.addService(googletag.pubads()),googletag.cmd.push((function(){googletag.display(t)})))}}))}catch(t){console.error(t.toString())}},adsControlWhenScroll:function(t){var a,e,o=this,r=n(".j_ads"),i=[],s=0;r.each((function(e,o){(a=n(o).attr("id"))===t&&(s=e),i.push(a)}));var d=[];if(i.length>0){for(var l=0;l<i.length;l++)e=o.adSlotArr[i[l]],l>s+1||l<s-1?(d.push(e),delete o.adSlotArr[i[l]]):o.addAdvertise(i[l]);d.length&&googletag.destroySlots(d)}},goToChapter:function(t){var a=this,e=t.chapterId,o=t.chapterName,r=g.getChapterUrl(null,g_data.bookId,e,g_data.bookName,o,g.bookTypes.NOVEL);if(history.replaceState){history.replaceState(null,null,r);for(var i=this.chapInfoArr.length,s=0;s<i&&e!=this.chapInfoArr[s].id;s++);s==i?(n(".j_loading_top").addClass("_loading"),n(".j_privilege_bar_wrap").addClass("dn"),n(".j_power_rank_wrap").addClass("dn"),n(".gift-bar-in-chapter").addClass("dn"),n(".j_update_list").addClass("dn"),this.clearAliveChapterAjax(),this.getChapterInfo(e,n(".j_loading_top"),(function(t){a.renderNewChapter(t)}))):n(window).scrollTop(this.chapInfoArr[s].start)}else location.href=r},renderNewChapter:function(t){var a=this,e=n(".j_contentWrap"),o=n(".j_bottom");e.html(""),o.html(""),this.globalParams.nextChapterId=t.data.chapterInfo.nextChapterId,this.globalParams.prevChapterId=t.data.chapterInfo.preChapterId,this.globalParams.chapId=t.data.chapterInfo.chapterId,this.globalParams.chapName=t.data.chapterInfo.chapterName,this.globalParams.chapIdx=t.data.chapterInfo.chapterIndex,this.globalParams.chapOrderIdx=t.data.chapterInfo.orderIndex,this.globalParams.comNum=t.data.chapterInfo.reviewTotal,this.globalParams.currNextId=t.data.chapterInfo.nextChapterId,this.globalParams.currPrevId=t.data.chapterInfo.preChapterId,this.globalParams.chapterLevel=t.data.chapterInfo.chapterLevel,this.globalParams.chapTpl=i.render("#chapter-content.html",n.extend(t.data,{isOriginal:g_data.isOriginal},{staticPath:g_data.staticPath,env:g_data.env,statusCode:g_data.login.statusCode,showTopSplit:!1,showBottomSplit:!1,adId:a.getChapterAdId(102),isTranslateMode:g_data.isTranslateMode,isWhiteUser:g_data.isWhiteUser},{data:{statusCode:g_data.login.statusCode,user:g_data.login.user,membershipStatus:g_data.membershipStatus,waitpayStatus:g_data.waitpayStatus}},g)),-1==this.globalParams.nextChapterId?this.globalParams.chapBotTpl=i.render("#content-bottom.html",n.extend(t.data,{env:g_data.env,staticPath:g_data.staticPath})):n(".j_update_list").addClass("dn"),this.chapInfoArr=[],this.addNextChapter(),n(window).scrollTop(0),-1!=this.globalParams.nextChapterId&&this.getChapterInfo(this.globalParams.nextChapterId,n(".j_chapterLoading"),(function(t){a.getNextChapterSucc(t)})),-1!=this.globalParams.prevChapterId?this.getChapterInfo(this.globalParams.prevChapterId,n(".j_loading_top"),(function(t){a.getPrevChapterSucc(t)})):this.globalParams.prevChapTpl=null,-1==this.globalParams.prevChapterId&&-1==this.globalParams.nextChapterId||this.initChapterScroll(),g_data.isTranslateMode&&this.MachineEditAPI.editionModalApi.close(),this.ParaCommentAPI.close(),this.ChapterCommentApi.checkoutCommentByChapterId(this.globalParams.currChapId),this.PopTipsAPI.refresh()},videoShowError:function(t,a){t.removeClass("_loading").removeClass("_success"),(new h).error(a)},watchVideo:function(t){var a=n(t.currentTarget),e=a.data("chapterid");if(!a.hasClass("j_login")&&!a.hasClass("_loading")){a.addClass("_loading"),a.parents(".j_locked_video").removeClass("_error");var o=this,r=setTimeout((function(){o.getChapToken(e,g_data.bookId,(function(t){}),(function(t){o.videoShowError(a,t.msg),a.removeClass("_loading");var e=a.parents(".j_lock_video");e.find("._error").html("Failed to proceed, please retry"),e.addClass("_error")})),clearTimeout(r)}),2e3)}},getAuthContentByToken:function(t,a){var e=this,o=t.data("chapterid"),r=n(".j_lock_chap_"+o);r.find(".j_locked_chap").addClass("_loading"),n.ajax({type:"GET",url:"/apiajax/chapter/GetChapterContentByToken",data:a,success:function(t){0===t.code&&t.data.isAuth?e.replaceAuthChapter(o,t.data):((new h).error(t.msg),r.find(".j_locked_chap").removeClass("_loading").addClass("_failed"))}})},skipAdByStone:function(t){var a=this,e=n(t.currentTarget),o=e.data("unlock-params"),r=g_data.login.user.SS,i=(g_data.login.user.fastPass,e.data("unlock-type")),s=n(".j_locked_chap"),d=s.data("vtype"),l=e.closest(".chapter_content");if(0==g_data.login.statusCode)if(void 0!==r){e.addClass("_loading"),l.addClass("_disabled");var p=n(".j_lock_chap_"+o.chapterId);this.payBySS({bookId:g_data.bookId,chapterId:o.chapterId,price:o.chapterPrice,unlockType:i},(function(t){if(a.unlockChapSucc(e,p,o,t,i,d),2==d){a.removeLockSignInCatalog(o.chapterId);try{this.qdReportUtm.utm_source,"google"===this.qdReportUtm.utm_source&&ga("send",{hitType:"Unlock Chapters",eventCategory:"Unlock Chapters",eventAction:"Unlock",eventLabel:"Unlock Chapters",eventValue:6})}catch(t){}}l.removeClass("_disabled");try{fbq("track","Lead",{content_name:"just_unlock",content_ids:[g_data.bookId],value:0,currency:"USD"})}catch(t){}}),(function(t){if(1==d)if(3019==t.code){e.data("eid","qi_H_ss"),s.data("l1",7),a.showNotEnoughSS(t.data&&t.data.costCoins,t.data&&t.data.balanceCoins),a.videoShowError(e,t.msg);try{fbq("track","Lead",{content_name:"pay_for_unlock",content_ids:[g_data.bookId],value:0,currency:"USD"})}catch(t){}}else 3020==t.code?((new h).error(t.msg),setTimeout((function(){location.reload()}),1e3)):a.videoShowError(e,t.msg);2==d&&a.unlockVip2Error(t,o.chapterId,i,e),e.removeClass("_loading").removeClass("_success"),l.removeClass("_disabled")})).error((function(){(new h).error("network error"),setTimeout((function(){e.removeClass("_loading").removeClass("_success"),l.removeClass("_disabled")}),1e3)}));try{"google"===this.qdReportUtm.utm_source&&ga("send","Click Unlock Button")}catch(t){}}else a.videoShowError(e,"something is wrong");else c.Login.showLoginModal()},unlockVip2Error:function(t,a,e,o){var r=n(".j_lock_chap_"+a),s=r.find(".j_locked_chap"),d=r.data("chaptername"),l=r.data("batchunlockstatus");if(3019==t.code){var c=this.ChapterStore.getChapterInfo(a);c.chapterId||(c={chapterId:a,isVip:2,price:t.data.costCoins,chapterName:d,batchUnlockStatus:l}),(new h).error(t.msg),s.html(i.render("#unlockDom",n.extend({},{chapterInfo:c,bookInfo:{bookId:g_data.bookId},data:{statusCode:g_data.login.statusCode,user:g_data.login.user,membershipStatus:g_data.membershipStatus,waitpayStatus:g_data.waitpayStatus}},g)))}else 4001==t.code?((new h).error(t.msg),o&&o.attr&&o.attr("disabled",!0)):3020==t.code?location.reload():(new h).error(t.msg)},payBySS:function(t,a,e){return n.ajax({type:"POST",url:"/go/pcm/book/unlockChapter",data:t,success:function(t){0===t.code?"function"==typeof a&&a(t):"function"==typeof e&&e(t)}})},unlockChapSucc:function(t,a,e,o,r,i){var s=this;if(t.addClass("_success"),a.find(".j_locked_chap").addClass("_loading"),setTimeout((function(){s.replaceAuthChapter(e.chapterId,{contents:o.data.contents||o.data.content,isRichFormat:o.data.isRichFormat})}),500),3==+r){var d=Math.max(0,+g_data.login.user.SS-parseInt(e.chapterPrice));(l=n(".j_ss_stone")).html(g.formatWordsCnt(d)),l.data("ss",d),g_data.login.user.SS=d,s.updateLockedDom(i)}else if(2==+r)d=Math.max(0,+g_data.login.user.SS-parseInt(e.chapterPrice)),(l=n(".j_ss_stone")).html(g.formatWordsCnt(d)),l.data("ss",d),g_data.login.user.SS=d,s.updateLockedDom(i);else if(5==+r){var l,c=Math.max(0,+g_data.login.user.fastPass-parseInt(e.chapterPrice));(l=n(".j_fp_stone")).html(g.formatWordsCnt(c)),l.data("fp",c),g_data.login.user.fastPass=c,s.updateLockedDom(i)}},updateLockedDom:function(t){var a=this,e=1==t?"#unlockVideoDom":"#unlockDom",o=n('.chapter_content[data-islock="1"]'),r=document.createElement("div");function s(o){var r=n(o).find(".chapter_content"),s=r.length>0?r:n(o),d=s.data("cid"),l=s.data("price"),c=s.data("chaptername"),p=s.data("batchunlockstatus"),h=a.ChapterStore.getChapterInfo(d);return h.chapterId||(h={chapterId:d,isVip:t,price:l,chapterName:c,batchUnlockStatus:p}),console.log(d,"updateLockedDom","render"),s.find(".j_locked_chap").html(i.render(e,n.extend({},{chapterInfo:h,bookInfo:{bookId:g_data.bookId},data:{statusCode:g_data.login.statusCode,user:g_data.login.user,membershipStatus:g_data.membershipStatus,waitpayStatus:g_data.waitpayStatus}},g))),n(o).html()}r.innerHTML=a.globalParams.chapTpl,a.globalParams.chapTpl=s(r),o.each((function(t,a){s(a)}))},showNotEnoughSS:function(t,a){c.Report.send({target:null},{ltype:"P",eid:"qi_D24",l1:11}),this._modApi?this._modApi.load():this._modApi=n("#unlockMod").overlay({load:!0,onBeforeLoad:function(e){var o=i.render("#unlockDom.html",{price:t,balance:a});n("#unlockMod").find(".g_mod_bd").html(o)}}).data("overlay")},replaceAuthChapter:function(t,a){a.chapterId=t;var e=n(".j_lock_chap_"+t);e.find(".j_locked_chap").remove(),e.find(".cha-words").html(i.render("#chaWords.html",n.extend({isTranslateMode:g_data.isTranslateMode,isWhiteUser:g_data.isWhiteUser,isLock:0,data:{user:g_data.login.user}},{chapterInfo:a},{bookInfo:{languageName:g_data.languageName}},g))),e.find(".cha-content").removeClass("_lock"),this.ParaCommentAPI.initChapterParaComment(t),this.updateChapPosition()},removeLockSignInCatalog:function(t){n('.j_catalog_modal_body a[data-cid="'+t+'"] .j_tag').remove(),this.apiCatalog&&this.apiCatalog.updateData((function(a){for(var e=a.chapters,o=e.length-1;o--;)if(e[o].chapterId===t)return e[o].isVip=0,{bookInfo:a.bookInfo,chapters:e};return a}))},initSkipTimer:function(t,a){t.parents(".j_lock_video").addClass("_play"),t.html(a+"s Skip"),new v({maxCount:a,onStart:function(a){t.html(a+"s Skip")},onCount:function(a){t.html(a+"s Skip")},onStop:function(){t.html("Skip"),t.addClass("j_can_skip"),t.attr("disabled",!1)}})},getChapToken:function(t,a,e,o){n.ajax({type:"GET",url:"/go/pcm/chapter/getContentByToken",data:{bookId:a,chapterId:t},success:function(a){if(0===a.code){var r=n(".j_lock_chap_"+t);if(a.data.isVip!=r.find(".j_locked_chap").data("vtype"))return void location.reload();"function"==typeof e&&e(a)}else"function"==typeof o&&o(a)}})},reportOnWhat:function(t){c.Report.send(t,{ltype:"H",eid:"qi_H_what"})},postVotePS:function(t){this.powerStoneApi.postPowerVote(t)},shareToVote:function(){this.shareBookApi.showShareModal()}})}.call(a,e,a,t))||(t.exports=o)},4479:(t,a,e)=>{"use strict";var o;void 0===(o=function(t){var a=e(7113);function o(){this.init()}return a.anno27=a.anno27||{},a.anno27.$on=null,o.prototype.getTitle=function(t){return t.attr("data-title")},o.prototype.getTxt=function(t){var a=t.attr("data-annotation-id");return t.parents(".cha-words").find('.tinymce-annotation-container [data-annotation-id="'+a+'"]').html()},o.prototype.getDom=function(t,e){return a('<span class="anno-drop"><span class="anno-drop-arrow"></span><span class="anno-drop-hd">'+t+'</span><span class="anno-drop-bd">'+e+"</span></span>")},o.prototype.setDirection=function(t,a){var e=this.$win.height(),o=this.$win.width(),r=2*a.clientX>o?"_l":"_r",n=2*a.clientY>e?"_t":"_b";t.removeClass("_l"===r?"_r":"_l"),t.removeClass("_t"===n?"_b":"_t"),t.addClass(r+" "+n)},o.prototype.setDom=function(t){var a=this,e=t.parent("anno"),o=a.getTitle(e);if(o){var r=a.getTxt(e),n=a.getDom(o,r);t.append(n),e.removeAttr("data-title"),a.$pop=n}},o.prototype.show=function(t,e){a.anno27.$on&&a.anno27.$on.length&&a.anno27.$on.removeClass("_on"),this.setDirection(t,e),a.anno27.$on=t,setTimeout((function(){t.addClass("_on")}),100)},o.prototype.hide=function(){a.anno27.$on&&a.anno27.$on.length&&(a.anno27.$on.removeClass("_on"),a.anno27.$on=!1)},o.prototype.init=function(){var t=this;t.$win=a(window),t.$body=a("body").on("mouseenter","anno sup",(function(e){e.preventDefault(),t.setDom(a(this))})).on("click","anno sup",(function(e){e.preventDefault();var o=a(this).parents("anno");o.hasClass("_on")||t.show(o,e)})).on("click",(function(e){var o=e.target;if(a.anno27.$on&&a.anno27.$on.length){var r=a.anno27.$on[0];o&&r&&o!=r&&0==r.contains(o)&&t.hide()}}));var e=!1;t.$win.on("resize",(function(){!e&&t.hide(),e=!0,setTimeout((function(){e=!1}),500)}))},o}.call(a,e,a,t))||(t.exports=o)},3035:(t,a,e)=>{"use strict";var o;void 0===(o=function(t){var a=e(7113),o=e(2271),r=e(7261),n=e(6263),i=e(9209);function s(t){t=t||{},this.pagination={pageSizeMin:100,pageNumMax:10,pageSize:100,currentPage:0,pageNum:1,ignore:0},this.isPreload=t.isPreload||!1,this.selTrigger=".j_catalog",this.selScroller=".j_catalog_modal_body",this.$scroller=null,this.currentChapterId=null,this.getChapterId=t.getChapterId||function(){},this.onChapterChange=t.onChapterChange||function(){},this.isPaginationFirst=!0,this.init()}return s.prototype.init=function(){var t=this,e=a("body");t.isPreload&&setTimeout((function(){t.loadData()}),200),a.each(["mouseenter","focus"],(function(a,o){e.on(o,t.selTrigger,(function(){t.loadData()}))})),new n(t.get$scroller()),e.on("click",t.selTrigger,(function(e){e.preventDefault(),t.getIsModalShow()&&(o.send({},{l1:1,eid:"qi_C_reader_content",ltype:"C",uiname:"content",pdid:g_data.bookId,blocktitle:g_data.currChapId}),t.loaded?t.showCatalogContent():t.get$scroller().html(a("#tplCatalogLoading").html()))})),e.on("click",".j_pagination a",(function(e){e.preventDefault();var o=a(this);if(!o.hasClass("_on")){var r=a(this).data("index");o.addClass("_on").siblings("._on").removeClass("_on"),t.pagination.currentPage=r,t.render()}})),e.on("click",t.selScroller+" a",(function(e){e.preventDefault();var r=a(this);if(!r.hasClass("_on")){r.addClass("_on").siblings("._on").removeClass("_on");var n=r.data("index"),i=t.data.chapters[n];t.currentChapterId=i.id,t.onChapterChange({chapterId:i.id,chapterName:i.name}),o.send({},{l1:1,eid:"qi_A_reader_content",uiname:"content",pdid:g_data.bookId,blocktitle:g_data.currChapId,did:t.currentChapterId})}}))},s.prototype.getIsModalShow=function(){return a("#modalCatalog").hasClass("_on")},s.prototype.updateData=function(t){if(this.data&&this.data.chapter&&this.data.chapter.length){var a=t(this.data);a&&(this.data=a)}},s.prototype.showCatalogContent=function(){var t=this,a=t.getChapterId();if(a!==t.currentChapterId){this.currentChapterId=a;var e=t.getNewPage(a);(t.isPaginationFirst||e!==t.pagination.currentPage)&&(t.pagination.currentPage=e,t.renderPagination()),t.render(),t.scrollIntoView()}else t.scrollIntoView()},s.prototype.changeCurrentId=function(t){var a=this;if(a.loaded&&a.getIsModalShow())if(t!==a.currentChapterId){a.currentChapterId=t;var e=a.getNewPage(t);if(e!==a.pagination.currentPage)return a.pagination.currentPage=e,a.renderPagination(),a.render(),void a.scrollIntoView();a.get$scroller().find('a[data-cid="'+t+'"]').addClass("_on").siblings("._on").removeClass("_on"),a.scrollIntoView()}else a.scrollIntoView()},s.prototype.scrollIntoView=function(){var t=this.get$scroller(),a=t.find("a._on");if(a.length){var e=parseInt(a[0].offsetTop-parseInt(t.height()/2));t.animate({scrollTop:e},300)}},s.prototype.get$scroller=function(){return this.$scroller||a(this.selScroller)},s.prototype.render=function(){var t=this,a=t.data.chapters,e=t.pagination,o=e.currentPage*e.pageSize,r=(e.currentPage+1)*e.pageSize;r>a.length&&(r=a.length);var n=i.render("#tplCatalog",{data:{currentChapterId:t.currentChapterId,bookInfo:t.data.bookInfo,chapterStartIndex:o,isLastPage:e.currentPage===e.pageNum-1,chapters:a.slice(o,r)}});t.get$scroller().html(n)},s.prototype.renderPagination=function(){var t=i.render("#tplCatalogPagination",{data:{pagination:this.pagination}}),e=a.trim(t);if(e){var o=a(".j_catalog_modal"),r=o.find(".j_pagination");r.length&&r.remove(),r=a(e),o.prepend(r);var n=r.find(".m-pagination"),s=n.find("._on"),d=parseInt(n.width()/2),l=parseInt(s[0].offsetLeft-d);l>0&&n.scrollLeft(l),this.isPaginationFirst=!1}},s.prototype.getChapters=function(t){for(var a=[],e=0,o=0;o<t.length;o++)for(var r=t[o],n=r.chapterItems||[],i=0;i<n.length;i++){var s=n[i];(0===s.chapterLevel||s.noArchive)&&(s.volumeInfo={index:r.index,title:"Volume "+(r.index>=0?r.index:"")+(r.name?":"+r.name:"")},s.index<1&&e++,a.push(s))}return{chapters:a,ignoreChapters:e}},s.prototype.getNewPage=function(t){for(var a=this.data.chapters,e=0,o=0;o<a.length;o++)if(a[o].id===t){e=o;break}return parseInt(e/this.pagination.pageSize)},s.prototype.loadData=function(){var t=this;t.loading||t.loaded||(t.loading=!0,r.get({url:"/apiajax/chapter/GetChapterList",cache:!1,data:{bookId:g_data.bookId},success:function(e){var o=t.getChapters(e.volumeItems||[]),r=o.chapters;t.data={bookInfo:e.bookInfo,chapters:r};var n=t.pagination,i=Math.ceil(r.length/n.pageNumMax);if(i<n.pageSizeMin&&(i=n.pageSizeMin),t.pagination.pageSize=i,t.pagination.total=r.length,t.pagination.pageNum=Math.ceil(r.length/i),t.pagination.ignore=o.ignoreChapters,t.getIsModalShow()){var s=t.getChapterId();t.currentChapterId=s,t.pagination.currentPage=t.getNewPage(s),t.renderPagination(),t.render(),t.scrollIntoView()}e.bookInfo.hasPrivilege&&(a(".j_privilege_bar_wrap").data("show",1),1==a(".j_privilege_bar_wrap").data("end")&&a(".j_privilege_bar_wrap").removeClass("dn"))},complete:function(){t.loading=!1,t.loaded=!0}}))},s}.call(a,e,a,t))||(t.exports=o)},1656:(t,a,e)=>{"use strict";var o;void 0===(o=function(t){var a=e(7113),o=e(9209),r=e(2271),n=e(8833),i=e(1469),s=e(5443),d=e(9026),l=e(797),c=e(4143),p=e(1072),h=e(3353);function g(t,e){this.globalParams={chapterId:e.id,bookId:t,orderType:1},this.ChapterCommentStore=new h,e.comNum&&this.setChapterCommentNum(e.id,+e.comNum),this.$headCount=a(".j_comment_title i"),this.isMainLast=0,this.onceInited=!1,this.open=!1,this.init(),this.$tab=a(".j_tab_chat"),this.apiTab=new c(this.$tab)}return e(9985),e(2134),e(7512),e(1249),e(4031),g.prototype.init=function(){var t=this;new s({parentScroll:".j_comment_chat",delAction:function(e){var o=e.data("ejs");if(o.reviewId){var r=a(".j_review_del_"+o.reviewId),n=r.closest(".j_chapter_comment_main").data("ejs").reviewId;n===o.reviewId&&(n=null),t.ChapterCommentStore.deleteComment(t.globalParams.chapterId,o.reviewId,n,(function(a){n&&t.refreshReplyBtn(n),r.remove(),t.syncHeaderCount(),(new d).success(a.msg)}),(function(t){(new d).error(t.msg||"error")}))}}}),a(document).on("click",".j_tab_chat>a",(function(a){var e=a.target.getAttribute("data-order");t.checkoutCommentType(e),t.getComments()})).on("click",".j_comment_good",(function(t){i(t)})).on("click",".j_bottom_comments",(function(e){e.preventDefault(),t.onceInit();var o=a(e.target).closest(".chapter_content").data("cid");t.open=!0,t.ChapterCommentStore.stop(),t.scrollToCorrectChapter(e),t.checkoutCommentType(1),t.checkoutCommentByChapterId(o)})).on("click",".j_comments",(function(e){e.preventDefault();var o=a(this);o.hasClass("_on")||(o.addClass("_on"),t.onceInit(),t.open=!0,t.ChapterCommentStore.stop(),t.checkoutCommentType(1),t.getComments())})).on("click",".j_get_more_replies",(function(e){var o=a(this).closest(".j_comment_wrap");t.getReplysByReivewDom(o)})).on("click",".j_comment_review",(function(a){a.preventDefault(),0==+g_data.login.statusCode&&new p({title:"Add a Chapter Comment",url:t.ChapterCommentStore.getAddUrl(),params:{bookId:t.globalParams.bookId,chapterId:t.globalParams.chapterId},onSuccess:function(a){t.ChapterCommentStore.addComment(t.globalParams.bookId,t.globalParams.chapterId),t.ChapterCommentStore.resetCommentByChapterId(t.globalParams.chapterId),t.checkoutCommentType(2),t.getComments(),t.syncHeaderCount(),(new d).success(a.msg||"success")}})})).on("click",".j_chapter_reply",(function(e){e.preventDefault();var r=a(this).closest(".j_comment_wrap"),n=a(this).closest(".j_chapter_comment_main"),i=n.data("ejs")||{},s=r.data("ejs")||{},c=null;if(s&&(c=s.reviewId),c){var h=o.render("#chapterCommentQuote",a.extend(!0,{item:t.ChapterCommentStore.getReviewByReviewId(c)},l));new p({title:"Reply to a comment",quote:h,url:t.ChapterCommentStore.getAddUrl(),params:{bookId:t.globalParams.bookId,chapterId:t.globalParams.chapterId,reviewId:c},onSuccess:function(a){t.ChapterCommentStore.addComment(t.globalParams.bookId,t.globalParams.chapterId,i.reviewId),t.ChapterCommentStore.resetReviewByReviewId(i.reviewId),t.getReplysByReivewDom(n),t.syncHeaderCount(),(new d).success(a.msg||"success")}})}}))},g.prototype.onceInit=function(){if(!this.onceInited){this.onceInited=!0;var t=this,e=a("html"),o=a(".cha-tools .j_comments"),n=a("#modalReview");t.$modalChat=n,t.$modalBody=n.find(".j_reply_block"),t.apiModalLoading=n.find(".j_comment_loader").loadingBox().data("loadingBox"),n.overlay({effect:"onOffNormal",oneInstance:!0,mask:!1,triggerActive:"_on",onBeforeLoad:function(){o.addClass("_on"),e.addClass("_sd_on")},onLoad:function(){r.send({target:null},{l1:"1",ltype:"P",pdt:"chaptercommentlist",eid:"qi_P_commentlist",pdid:t.globalParams.bookId,cid:t.globalParams.chapterId})},onClose:function(){a(".j_comments").removeClass("_on"),e.removeClass("_sd_on"),t.open=!1,t.reset()}}),t.chatModalApi=n.data("overlay"),t.initCommentScroll()}},g.prototype.syncHeaderCount=function(){var t=this,a=t.ChapterCommentStore.getCommentNum(t.globalParams.chapterId);t.$headCount.html(a>0?a:"")},g.prototype.getReplysByReivewDom=function(t){var e=this,o=(t.data("ejs")||{}).reviewId;if(o){var r=t.find(".j_more_replies_body"),n=a('<span class="g_loading _on"><i></i></span>'),i=t.find(".j_get_more_replies"),s=e.ChapterCommentStore.getLastTimeByReviewId(o);0===s?r.html(n):r.append(n),e.ChapterCommentStore.requestChapterCommentReplys(e.globalParams.bookId,e.globalParams.chapterId,o,s,(function(t){1===t.isLast?i.addClass("dn"):i.hasClass("dn")&&i.removeClass("dn"),e.refreshReplyBtn(o,i),e.renderDom(s,o,r)}),(function(){}),(function(){n.remove()}))}},g.prototype.checkoutCommentType=function(t){var a=this,e=t?2==+t?2:1:this.globalParams.orderType,o=a.$tab.find('[data-order="'+e+'"]').addClass("_on");o.siblings("._on").removeClass("_on"),a.apiTab.moveTo(o),a.globalParams.orderType=e,a.reset()},g.prototype.setChapterCommentNum=function(t,a){this.ChapterCommentStore.setChapterCommentNum(t,a)},g.prototype.checkoutCommentByChapterId=function(t,e){var o=this;if(e&&e.comNum>=0){var r=+e.comNum;a(".cha-tools .j_comments i").html(r>99?"99+":r||""),o.setChapterCommentNum(t,r)}t&&o.setCurChapId(t),o.open&&o.getComments()},g.prototype.getComments=function(){var t=this;if(t.open){t.chatModalApi&&t.chatModalApi.load();var a=t.ChapterCommentStore.getLastTimeByChapterId(t.globalParams.chapterId);t.apiModalLoading.loading(),0===a&&t.$modalBody.html(""),t.ChapterCommentStore.requestChapterCommentList(t.globalParams.bookId,t.globalParams.chapterId,"",a,t.globalParams.orderType,(function(e){t.isMainLast=e.isLast,t.renderDom(a),t.syncHeaderCount()}),(function(t){}),(function(){1==t.isMainLast&&t.apiModalLoading.unloading()}))}},g.prototype.initCommentScroll=function(){var t=this,e=a(".j_comment_chat");new n({$wrapper:e,$scroller:e,onLoadingNext:function(){var a=t.ChapterCommentStore.getLastTimeByChapterId(t.globalParams.chapterId);1!==t.isMainLast&&0!==a&&t.getComments()},onLoadingPrev:function(){}})},g.prototype.setCurChapId=function(t){this.reset(),this.globalParams.chapterId=t,this.$modalChat&&this.$modalChat.attr("data-report-cid",t)},g.prototype.refreshReplyBtn=function(t,e){if(t){e||(e=a(".j_review_del_"+t+" .j_get_more_replies"));var o=this.ChapterCommentStore.getReviewByReviewId(t),r=0;o&&(r=o.replyAmount||0);var n=r-this.ChapterCommentStore.getShowedReviewsNumByReviewId(t);n<=0?e.addClass("dn"):e.find("strong").removeClass("dn").html("view "+n+" replies")}},g.prototype.renderDom=function(t,e,r){var n=this;r=r||n.$modalBody;var i=[];e?(i=n.ChapterCommentStore.getReplyQueueByReviewId(e),n.ChapterCommentStore.clearReplyQueueByReviewId(e)):(i=n.ChapterCommentStore.getCommentQueueByChapterId(n.globalParams.chapterId),n.ChapterCommentStore.clearCommentQueueByChapterId(n.globalParams.chapterId));var s=i.map((function(t){return n.ChapterCommentStore.getReviewByReviewId(t)})),d=o.render("#chapterReplyTpl.html",a.extend(!0,{},{data:{items:s,chapterId:n.globalParams.chapterId,bookId:n.globalParams.bookId},statusCode:g_data.login.statusCode,user:g_data.login.user,isAuthor:n.ChapterCommentStore.getIsAuthor(),env:g_data.env,staticPath:g_data.staticPath,lastTime:t,from:e?"review":""},l));r.append(d).find(".g_txt_over").rowsEll()},g.prototype.reset=function(){this.$headCount.html(""),this.ChapterCommentStore.stop(),this.isMainLast=0},g.prototype.scrollToCorrectChapter=function(t){var e=a(t.currentTarget);if(!e.hasClass("cha-tools-reviews")&&!e.hasClass("j_comment_link_"+this.globalParams.chapterId))try{var o,r;void 0!==e.get(0)&&(r=a(e.get(0)).offset().top-a(window).scrollTop()),o=parseInt(a(window).scrollTop()-a(window).height()/2+r-70),a("html,body").animate({scrollTop:o},300)}catch(t){}},g}.call(a,e,a,t))||(t.exports=o)},2551:(t,a,e)=>{"use strict";var o;void 0===(o=function(t,a,o){var r=e(7113),n={chapters:{},bookId:null};function i(t){r.extend(!0,this,n,t)}return i.prototype.setChapterInfo=function(t,a){this.chapters[t]={data:a}},i.prototype.getChapterInfo=function(t){return this.chapters[t]},i.prototype.reset=function(){this.chapters={}},i}.call(a,e,a,t))||(t.exports=o)},5265:(t,a,e)=>{"use strict";var o;void 0===(o=function(t,a,o){var r=e(7113),n=e(9981),i=e(2271);function s(){navigator&&"en"!==navigator.language&&i.send({target:null},{ltype:"P",eid:"D31",l1:1});var t=this.getSetGtStatus();t&&i.send({target:null},{ltype:"P",eid:"D30",l1:1});var a=r(".j_gt");if(!a.length)return!1;"0"===n.get("googtrans-open")&&a.addClass("_close"),t&&a.addClass("_show_cancel"),a.addClass("_show");var e=this;a.on("click",".j_gt_close",(function(t){t.preventDefault(),n.set("googtrans-open","0",null,"/"),e.getSetGtStatus()&&(n.del("googtrans",null,"/"),n.del("googtrans",".webnovel.com","/"),i.send({target:null},{ltype:"A",eid:"D28",l1:1}),window.location.reload(!0))})).on("click",".j_gt_open",(function(t){t.preventDefault(),n.set("googtrans-open","1",null,"/"),a.removeClass("_close")})).on("click",".j_gt_hide",(function(t){t.preventDefault(),n.set("googtrans-open","0",null,"/"),a.addClass("_close")})).on("click",".m-gt-tool",(function(t){t.preventDefault(),r(this).toggleClass("_on")})).on("change","select",(function(t){var e=t.target.value;e&&"en"!==e?a.addClass("_show_cancel"):a.removeClass("_show_cancel")}))}return s.prototype.getSetGtStatus=function(){var t=n.get("googtrans");return!!t&&"/en/en"!==t},s}.call(a,e,a,t))||(t.exports=o)},8110:(t,a,e)=>{"use strict";var o;void 0===(o=function(t){var a=e(7113),o=e(9209),r=e(2271),n=e(8833),i=e(7360),s=e(4099),d=e(9026),l=e(797),c=e(1072),p=e(9701);function h(t){this.$btnTrigger=null,this.globalParams={chapterId:-1,paragraphId:-1,bookId:t},this.ParaStore=new p(t),this.$headCount=a(".j_modal_para_comment_count"),this.isMainLast=0,this.onceInited=!1,this.init()}return e(9985),e(2134),e(7512),e(1249),e(4031),h.prototype.init=function(){var t=this;new i({parentScroll:".j_para_comment_content",delAction:function(e){var o=e.data("ejs");if(o.reviewId){var r=a(".j_review_del_"+o.reviewId),n=r.closest(".j_para_comment_main").data("ejs").reviewId;n===o.reviewId&&(n=null),t.ParaStore.deleteParaComment(t.globalParams.chapterId,t.globalParams.paragraphId,o.reviewId,n,(function(a){n&&t.refreshReplyBtn(n),t.refreshParaNum(),r.remove(),(new d).success(a.msg)}),(function(t){(new d).error(t.msg||"error")}))}}}),a(document).on("click",".j_para_good",(function(t){s(t)})).on("click",".j_open_para_comment",(function(e){e.preventDefault();var o=a(this);o.hasClass("_on")||(t.$btnTrigger=o.addClass("_on"),t.onceInit(),t.showParaCommentModal(e))})).on("click",".j_get_more_replies",(function(e){var o=a(this).closest(".j_para_comment_wrap");t.getReplysByReivewDom(o)})).on("click",".j_para_review",(function(e){e.preventDefault(),0==+g_data.login.statusCode&&new c({title:"Add a Paragraph Comment",quote:a(".j_para_"+t.globalParams.paragraphId+" p").text(),url:t.ParaStore.getAddUrl(),params:{bookId:t.globalParams.bookId,chapterId:t.globalParams.chapterId,paragraphId:t.globalParams.paragraphId},onSuccess:function(a){t.ParaStore.addParaComment(t.globalParams.chapterId,t.globalParams.paragraphId),t.ParaStore.resetParagraphByParagraphId(t.globalParams.paragraphId),t.getParaCommentsByParagraphId(),t.refreshParaNum(),(new d).success(a.msg||"success")}})})).on("click",".j_para_reply",(function(e){e.preventDefault();var r=a(this).closest(".j_para_comment_wrap"),n=a(this).closest(".j_para_comment_main"),i=n.data("ejs")||{},s=r.data("ejs")||{},p=null;if(s&&(p=s.reviewId),p){var h=o.render("#paraCommentQuote",a.extend(!0,{item:t.ParaStore.getReviewByReviewId(p)},l));new c({title:"Reply to a comment",quote:h,url:t.ParaStore.getAddUrl(),params:{bookId:t.globalParams.bookId,chapterId:t.globalParams.chapterId,paragraphId:t.globalParams.paragraphId,replyToId:p},onSuccess:function(a){t.ParaStore.addParaComment(t.globalParams.chapterId,t.globalParams.paragraphId,i.reviewId),t.ParaStore.resetReviewByReviewId(i.reviewId),t.getReplysByReivewDom(n),t.refreshParaNum(),(new d).success(a.msg||"success")}})}}))},h.prototype.formatParaAmount=function(t){if(t){var e=this.ParaStore.getParaCommentNumByParagraphId(t),o=a(".j_para_"+t+" .j_para_comment_count");if(e>0){var r=e>99?"99+":e;return this.ParaStore.getAuthorReviewStatusParagraphId(t)&&(r='<svg class="para-comment-entrance-icon"><use xlink:href="#i-typewriter"></use></svg>'+r),o.html(r),void o.addClass("para-comment-num")}o.removeClass("para-comment-num")}},h.prototype.syncModalHeaderNum=function(){var t=this;if(t.globalParams.paragraphId){var a=t.ParaStore.getParaCommentNumByParagraphId(t.globalParams.paragraphId);a>=0&&this.$headCount.html(a)}},h.prototype.refreshParaNum=function(){var t=this;t.formatParaAmount(t.globalParams.paragraphId),t.syncModalHeaderNum()},h.prototype.refreshReplyBtn=function(t,e){if(t){e||(e=a(".j_review_del_"+t+" .j_get_more_replies"));var o=this.ParaStore.getReviewByReviewId(t),r=0;o&&(r=o.replyAmount||0);var n=r-this.ParaStore.getShowedReviewsNumByReviewId(t);n<=0?e.addClass("dn"):e.find("strong").removeClass("dn").html("view "+n+" replies")}},h.prototype.getReplysByReivewDom=function(t){var e=this,o=(t.data("ejs")||{}).reviewId;if(o){var r=t.find(".j_more_replies_body"),n=a('<span class="g_loading _on"><i></i></span>'),i=t.find(".j_get_more_replies"),s=e.ParaStore.getLastTimeByReviewId(o);0===s?r.html(n):r.append(n),e.ParaStore.requestParagraphReivewReplys(e.globalParams.chapterId,e.globalParams.paragraphId,o,s,(function(t){1===t.isLast?i.addClass("dn"):i.hasClass("dn")&&i.removeClass("dn"),e.refreshReplyBtn(o,i),e.renderDom(s,o,r)}),(function(){}),(function(){n.remove()}))}},h.prototype.getParaCommentsByParagraphId=function(){var t=this,a=t.ParaStore.getLastTimeByParagraphId(t.globalParams.paragraphId);t.apiModalLoading.loading(),0===a&&t.$modalBody.html(""),t.ParaStore.requestParagraphReivews(t.globalParams.chapterId,t.globalParams.paragraphId,a,(function(e){t.isMainLast=e.isLast,t.renderDom(a)}),(function(){}),(function(){1==t.isMainLast&&t.apiModalLoading.unloading()}))},h.prototype.reset=function(){this.ParaStore.stop(),this.globalParams.chapterId="",this.globalParams.paragraphId="",this.isMainLast=0},h.prototype.setStatus=function(t){1==+t?this.globalParams.open=!0:(a(".para-comment-allowed").removeClass("para-comment-allowed"),this.globalParams.open=!1,this.reset())},h.prototype.initChapterParaComment=function(t){var e=this;t!==e.globalParams.chapterId&&e.globalParams.open&&(a(".j_chapter_"+t+" .j_locked_chap").length>0||(e.globalParams.chapterId=t,e.ParaStore.requestChapterParaCommentNum(e.globalParams.chapterId,(function(){a(".j_chapter_"+e.globalParams.chapterId).addClass("para-comment-allowed"),e.ParaStore.getParagraphIdsByChapterId(e.globalParams.chapterId).forEach((function(t){e.formatParaAmount(t)}))}))))},h.prototype.showParaCommentModal=function(t){var e=this,o=a(t.currentTarget),r=o.closest(".j_paragraph"),n=r.data("ejs"),i=n.paragraphId,s=n.chapterId;i!==e.globalParams.paragraphId&&(e.reset(),e.globalParams.chapterId=s,e.globalParams.paragraphId=i,e.getAPI().load(),e.$modalBody&&(e.$modal.attr("data-report-cid",s),e.$modal.attr("data-report-paragraphid",i)),a(".j_open_para_comment._on").removeClass("_on"),a(".j_paragraph").removeClass("show-para-comment"),o.addClass("_on"),r.addClass("show-para-comment"),e.getParaCommentsByParagraphId(),e.initParaCommentScroll(),e.syncModalHeaderNum())},h.prototype.initParaCommentScroll=function(){var t=this,e=a(".j_para_comment_content");new n({$wrapper:e,$scroller:e,onLoadingNext:function(){var a=t.ParaStore.getLastTimeByParagraphId(t.globalParams.paragraphId);1!==t.isMainLast&&0!==a&&t.getParaCommentsByParagraphId()},onLoadingPrev:function(){}})},h.prototype.getAPI=function(){return this.apiModal},h.prototype.close=function(){this.onceInited&&this.getAPI().close()},h.prototype.onceInit=function(){if(!this.onceInited){var t=this,e=a("html"),o=a("#modalParaComment");t.$modal=o,t.$modalBody=o.find(".j_reply_block"),t.apiModalLoading=o.find(".j_comment_loader").loadingBox().data("loadingBox"),t.apiModal=t.$modal.overlay({effect:"onOffNormal",oneInstance:!0,mask:!1,triggerActive:"_on",onBeforeLoad:function(){e.addClass("_sd_on")},onLoad:function(){r.send({target:null},{l1:"1",ltype:"P",pdt:"paragraphcommentlist",eid:"qi_P_commentlist",pdid:t.globalParams.bookId,cid:t.globalParams.chapterId,paragraphid:t.globalParams.paragraphId})},onClose:function(){e.removeClass("_sd_on"),t.apiModalLoading.unloading(),a(".j_open_para_comment._on").removeClass("_on"),a(".j_paragraph").removeClass("show-para-comment"),t.reset(),setTimeout((function(){t.$modalBody.html("")}),500)}}).data("overlay"),t.paraCommentPageIndex=1,this.onceInited=!0}},h.prototype.renderDom=function(t,e,r){var n=this;r=r||n.$modalBody;var i=[];e?(i=n.ParaStore.getReplyQueueByReviewId(e),n.ParaStore.clearReplyQueueByReviewId(e)):(i=n.ParaStore.getReviewQueueByParagraphId(n.globalParams.paragraphId),n.ParaStore.clearReviewQueueByParagraphId(n.globalParams.paragraphId));var s=i.map((function(t){return n.ParaStore.getReviewByReviewId(t)})),d=o.render("#tplParaComment",a.extend(!0,{},{data:{items:s,paragraphId:n.globalParams.paragraphId,chapterId:n.globalParams.chapterId,bookId:n.globalParams.bookId},statusCode:g_data.login.statusCode,user:g_data.login.user,isAuthor:n.ParaStore.getIsAuthor(),env:g_data.env,staticPath:g_data.staticPath,lastTime:t,from:e?"review":""},l));r.append(d).find(".g_txt_over").rowsEll()},h}.call(a,e,a,t))||(t.exports=o)},261:(t,a,e)=>{"use strict";var o;void 0===(o=function(t){var a=e(7113),o=e(9209),r=e(2271),n={bookId:-1,dropSel:".j_para_drop_bar",tplSel:"#tplParaOperationDrop",canShowMtl:!1,canShowPara:!1};function i(t){a.extend(this,n,t,!0),this.init()}return i.prototype.togglePara=function(t){this.canShowPara=1==+t},i.prototype.toggleMtl=function(t){this.canShowMtl=1==+t},i.prototype.getDropDom=function(t,e,r,n){var i=t.find(this.dropSel);i.length&&i.remove();var s=e.data("ejs")||{};s.hasCount=r,s.hasMtlEdit=n,s.bookId=this.bookId,s.userId=g_data.login.user.userId||-1,s.originalUserId=s.originalUserId||-1;var d=o.render(this.tplSel,{data:s});return i=a(a.trim(d)),t.append(i),i},i.prototype.isInScreenTop=function(t){return t[0].getBoundingClientRect().top<100},i.prototype.init=function(){var t=this,e=null,o=null;a(document).on("mouseenter",".j_paragraph",(function(n){if(n.preventDefault(),t.canShowMtl||t.canShowPara){var i=a(this),s=i.find(".j_paragraph_content"),d=s.length>0?"para":"title",l=1===g_data.isWhiteUser&&1===g_data.isTranslateMode&&"title"!==d,c=i.parents(".para-comment-allowed").length>0;(c||l)&&(e=setTimeout((function(){t.getDropDom(i,s,c,l)[t.isInScreenTop(i)?"addClass":"removeClass"]("_reverse"),o=setTimeout((function(){i.addClass("_show_tip")}),0)}),300),r.send({target:null},{l1:"1",eid:"qi_A_paragraph",pdid:t.bookId,uiname:"paragraph",dt:i.find(".para-comment-num").length}))}})).on("mouseleave",".j_paragraph",(function(){clearTimeout(e),clearTimeout(o),a(this).removeClass("_show_tip")}))},i}.call(a,e,a,t))||(t.exports=o)},4368:(t,a,e)=>{"use strict";var o;void 0===(o=function(t){var a=e(7113),o=e(9981),r=e(9209),n=e(797),i=e(3417).default,s=e(5017).default;function d(){this.init()}return d.prototype.init=function(){var t=this;t.mtlShowPos=-1,t.mtlHasShow=-1,t.paraHasShow=-1,t.paraClosed=-1,t.mtlClosed=-1,t.isChapterLocked=!1,t.$win=a(window),t.getFirstChapter(),t.getFirstChapterParas(),t.isChapterLocked||(t.initParaTips(),t.initMtlTip())},d.prototype.getFirstChapter=function(){this.firstChapter=a(".j_chapter_"+g_data.firstChap.id+" .cha-content"),this.isChapterLocked=this.firstChapter.hasClass("_lock")},d.prototype.getFirstChapterParas=function(){this.firstChapterParas=a(".j_chapter_"+g_data.firstChap.id+" .j_paragraph"),this.mtlPara=this.firstChapterParas.eq(0)},d.prototype.refresh=function(t){var e=this;e.curChapterId=t,-1===e.paraClosed&&(e.getFirstChapter(),0===e.firstChapter.length?(e.paraClosed=1,a(".j_para_comment_tip").remove()):this.refrshPosition()),-1===e.mtlClosed&&(e.getFirstChapter(),0===e.firstChapter.length?(e.mtlClosed=1,a(".j_edition_tip").remove()):this.refrshMtlPosition())},d.prototype.initParaTips=function(){var t=this;if(1!=+o.get("para-comment-tip-show")){if(a(".j_para_comment_tip").remove(),t.firstChapter.length>0){var e=r.render(s,a.extend({},n,{staticConf:{staticPath:g_data.staticPath,domainPrefix:g_data.env},top:t.firstChapter.offset().top}));a("body").append(e),a(".j_para_comment_close").bind("click",(function(a){t.closeParaTips(a)}))}}else t.closeParaTips=1},d.prototype.refrshPosition=function(){a(".j_para_comment_tip").css({top:this.firstChapter.offset().top})},d.prototype.closeParaTips=function(t){t.preventDefault(),o.set("para-comment-tip-show",1,".webnovel.com","/",31536e6),this.paraClosed=1,a(".j_para_comment_tip").remove()},d.prototype.initMtlTip=function(){var t=this;if(0!=+g_data.isTranslateMode){if(1!=+o.get("mtl-edition-tip-show")&&t.firstChapter.length>0){var e=1,s="",d=0;if(1===g_data.isWhiteUser)e=1;else if(1===t.firstChapterParas.length)e=0;else for(var l=1;l<t.firstChapterParas.length;l++)if(t.firstChapterParas.eq(l).has(".j_edition_count").length>0){e=l;break}if(e>=1&&t.firstChapterParas.length>e){this.mtlPara=t.firstChapterParas.eq(e);var c=this.mtlPara;d=c.offset().top,d=this.checkMtlPosition(d);var p=c.data("ejs")||{};s=r.render(i,a.extend({},n,{statusCode:g_data.login.statusCode,staticConf:{staticPath:g_data.staticPath,domainPrefix:g_data.env},env:g_data.env,isWhiteUser:g_data.isWhiteUser,top:d,paragraphId:p.paragraphId})),a("body").append(s),a(".j_edition_tip_close").bind("click",(function(a){t.closeMtlTip(a)}))}else t.mtlClosed=1}}else t.mtlClosed=1},d.prototype.closeMtlTip=function(t){t.preventDefault(),o.set("mtl-edition-tip-show",1,".webnovel.com","/",31536e6),this.mtlClosed=1,a(".j_edition_tip").remove()},d.prototype.checkMtlPosition=function(t){if(a(".j_para_comment_tip").length>0){var e=a(".j_para_comment_tip").offset().top+250;t=t>e?t:e}return t},d.prototype.refrshMtlPosition=function(){try{var t=this.mtlPara.offset().top;t=this.checkMtlPosition(t),a(".j_edition_tip").css("top",t)}catch(t){}},d}.call(a,e,a,t))||(t.exports=o)},8833:(t,a,e)=>{"use strict";var o;void 0===(o=function(t,a,o){var r=e(7113),n=e(6256),i={$wrapper:r("body"),$scroller:r(window),supportScrollPrev:!1,mustDoneOnScroll:null,onChapterScroll:null,onLoadingNext:null,onLoadingPrev:null,isLoading:!1,jumpToChapter:null,ratio:.5,listSize:30,listUnit:"li"};function s(t){r.extend(!0,this,i,t),this.init()}return s.prototype.init=function(){var t=this,a=this.$scroller,e=this.$wrapper.height(),o=0,r=0,i=0;"function"==typeof t.onLoadingPrev&&a.on("mousewheel",n.throttle((function(e){void 0!==e&&((o=e.originalEvent&&e.originalEvent.wheelDelta&&(e.originalEvent.wheelDelta>0?1:-1)||e.originalEvent&&e.originalEvent.detail&&(e.originalEvent.detail>0?-1:1))>0&&0==a.scrollTop()&&1!=+g_data.firstChap.idx&&(e.preventDefault(),"function"==typeof t.onLoadingPrev&&t.onLoadingPrev()),o>0?"function"==typeof t.onChapterScroll&&t.onChapterScroll("bottomToTop"):"function"==typeof t.onChapterScroll&&t.onChapterScroll("topToBottom"))}),100,160)),a.on("scroll",n.throttle((function(){if("function"==typeof t.mustDoneOnScroll)try{t.mustDoneOnScroll()}catch(t){console.log("mustDoneOnScroll",t)}"function"==typeof t.onChapterScroll&&t.onChapterScroll();var o=a.scrollTop();i=o,t.$wrapper.get(0).scrollHeight-o-e<t.ratio*e&&"function"==typeof t.onLoadingNext&&t.onLoadingNext(),i<r&&o<t.ratio*e&&"function"==typeof t.onLoadingPrev&&t.onLoadingPrev(),r=i}),100,160))},s}.call(a,e,a,t))||(t.exports=o)},4605:(t,a,e)=>{"use strict";var o;void 0===(o=function(t,a,o){var r=e(7113),n=(e(3132),e(3654)),i={delSel:".j_edition_del_item",editSel:".j_edition_edit_item",dropSel:".j_edition_drop_trigger",containerSel:".j_edtion_crud_drop",onBeforeShow:function(t){return!0},onClickDel:function(){},onClickEdit:function(){}};function s(t){r.extend(!0,this,i,t),this.init()}return s.prototype.init=function(){var t=this;t.createDom(),t.dropEvent(),t.itemEvent()},s.prototype.createDom=function(){r(this.containerSel).length||r("body").append('<div class="j_edtion_crud_drop g_drop"><a href="javascript:;" class="j_edition_del_item" title="Delete">Delete</a><a href="javascript:;" class="j_edition_edit_item" title="Edit">Edit</a></div>')},s.prototype.dropEvent=function(){var t=this;r(document).on("click.drop",t.dropSel,(function(a){a.preventDefault();var e=r(this),o=r(this).data("drop");o?o.show():e.drop(r(t.containerSel),{eventType:"click",position:"3-2",offsets:{x:8,y:6},onShow:function(t,a){var e=this;a.off("click.drop").on("click.drop","a",(function(t){e.hide()}));var o=a.find("a");o.data("paraindex",t.data("paraIndex")),o.data("contentid",t.data("contentid")),o.data("paragraphid",t.data("paragraphid")),o.data("chapterid",t.data("chapterid")),o.data("bookid",t.data("bookid")),o.data("cuserid",t.data("cuserid")),o.data("parent",t.data("parent"))}}).data("drop").show()}))},s.prototype.itemEvent=function(){var t=this;r(document).on("click",t.delSel,(function(a){a.preventDefault(),r(this),new n({content:"Are you sure that you want to delete the content?",btGhost:{text:"Cancel"},bt:{text:"Delete",callback:function(a,e){t.onClickDel()}}})})),r(document).on("click",t.editSel,(function(a){r(this),t.onClickEdit()}))},s}.call(a,e,a,t))||(t.exports=o)},2892:(t,a,e)=>{"use strict";var o;void 0===(o=function(t,a,o){var r=e(7113),n=e(7398),i=e(1174),s=e(8833),d=e(3888),l=e(4605),c=e(6898),p=e(9209),h=e(9026),g=e(797);e(9985),o.exports=n.inherit({el:"body",events:{"click .j_edition":"showEditionModalData","click .j_open_edit_edition":"triggerEditionEdit","click .j_edition_edit_cancel":"removeEditionEditPanel","click .j_edition_edit_submit":"submitEdition","click .j_edition_good":i,"click .j_edition_tip_close":"closeTip"},elements:{},render:function(){return this.setElement(this.el),this.init(),this},init:function(){var t=this;this.globalParams={isLoadingEdition:!1,isEditionEdit:!1,mtlParams:{paraIndex:0,contentId:0,paragraphId:0}},new c({onDropShow:function(t){r(window).one("scroll",(function(){t.hide()})),r(".j_edition_wrap").one("scroll",(function(){t.hide()}))}}),t.initEdition(),t.initEditionModal(),new l({onClickEdit:function(){t.showEditionEditPanel()},onClickDel:function(){t.delParagraphEdition()}})},initEdition:function(){r(".j_page").addClass("page-loaded")},initEditionModal:function(){var t=r("html"),a=r("#modalEdition").overlay({effect:"onOffNormal",oneInstance:!0,mask:!1,triggerActive:"_on",onLoad:function(){},onBeforeLoad:function(){t.addClass("_sd_on")},onClose:function(){t.removeClass("_sd_on"),r(".j_edition._on").removeClass("_on"),r(".cha-paragraph").removeClass("show-editions"),setTimeout((function(){r(".j_edition_content").html('<span class="g_loading"><i></i></span>')}),500)}}).data("overlay");return this.editionModalApi=a,this.editionPageIdx=1,a},showEditionModalData:function(t){if(t.preventDefault(),!this.globalParams.isEditionEdit){var a=this,e=r(t.currentTarget);if(!e.hasClass("_on")&&!this.editionModalApi.isOpened()){var o=e.closest(".j_paragraph"),n=o.find(".j_paragraph_content"),i=o.data("ejs");a.globalParams.mtlParams.chapterId=i.chapterId,a.globalParams.mtlParams.paragraphId=i.paragraphId,a.globalParams.mtlParams.paraIndex=i.paraIndex;var s=n.data("ejs");a.globalParams.mtlParams.contentId=s.contentId,a.globalParams.mtlParams.originalUserId=s.originalUserId,a.globalParams.mtlParams.panel=o,r(".j_paragraph").removeClass("show-editions"),this.editionModalApi.load(),e.addClass("_on"),o.addClass("show-editions"),this.initEditionDetail()}}},initEditionDetail:function(){var t=this,a=r(".edition-modal-review");a.find(".j_edition_content").html('<span class="g_loading _on"><i></i></span>'),t.globalParams.editionCount=0,this.getEditionDetail({bookId:g_data.bookId,chapterId:t.globalParams.mtlParams.chapterId,pageIndex:1,paragraphId:t.globalParams.mtlParams.paragraphId},(function(e){setTimeout((function(){t.getEditionDetailSucc(a,e)}),500)}))},getEditionDetail:function(t,a){var e=this;e.isLoadingEdition=!0,t._=(new Date).getTime(),r.ajax({type:"GET",url:"/go/pcm/machineTrans/getContentList",cache:!1,data:t||{},success:function(o){0===o.code&&(e.globalParams.editionPageIdx=t.pageIndex+1,e.globalParams.editionCount=o.data.total||o.data.contents.length,e.isLoadingEdition=!1,a&&"function"==typeof a&&a(o))}})},getEditionDetailSucc:function(t,a){var e,o=this;t.find(".j_edition_content").html(p.render("#editionTpl.html",r.extend(!0,{},a,{chapterId:o.globalParams.mtlParams.chapterId,contentId:o.globalParams.mtlParams.contentId,paragraphId:o.globalParams.mtlParams.paragraphId,paraIndex:o.globalParams.mtlParams.paraIndex,isWhiteUser:g_data.isWhiteUser,originalUserId:o.globalParams.mtlParams.originalUserId}))),(e=t.find(".j_edition_block")).append(p.render("#paraEditionTpl.html",r.extend({},a,g,{statusCode:g_data.login.statusCode,userId:g_data.login.user.userId,env:g_data.env,bookId:g_data.bookId,chapterId:o.globalParams.mtlParams.chapterId,contentId:o.globalParams.mtlParams.contentId,paragraphId:o.globalParams.mtlParams.paragraphId,paraIndex:o.globalParams.mtlParams.paraIndex}))),o.initEditionScroll(a.data.total),e.data("chapid",a.data.chapterId),e.data("bid",g_data.bookId),e.data("paragraphid",o.globalParams.mtlParams.paragraphId),e.data("contentid",o.globalParams.mtlParams.contentId),e.data("paraindex",o.globalParams.mtlParams.paraIndex)},getMoreEditionSucc:function(t){r(".j_edition_content").find(".j_edition_block").append(p.render("#paraEditionTpl.html",r.extend({},t,g,{statusCode:g_data.login.statusCode,userId:g_data.login.user.userId,env:g_data.env,bookId:g_data.bookId,chapterId:that.globalParams.mtlParams.chapterId,paragraphId:that.globalParams.mtlParams.paragraphId})))},initEditionScroll:function(t){var a=this,e=r(".j_edition_wrap"),o=e.find(".g_loading");new s({$wrapper:e,$scroller:e,onLoadingNext:function(){var e=a.globalParams.mtlParams.chapterId;a.isLoadingEdition||a.globalParams.editionCount>=t||(o.addClass("_on"),a.getEditionDetail({bookId:g_data.bookId,chapterId:e,paragraphId:a.globalParams.mtlParams.paragraphId,pageIndex:a.globalParams.editionPageIdx},(function(t){a.getMoreEditionSucc(t,e,paragraphId)})))}})},triggerEditionEdit:function(t){if(!this.globalParams.isEditionEdit){t.preventDefault();var a=this,e=r(t.currentTarget).closest(".j_paragraph"),o=(e=e.length>0?e:r(".j_paragraph.show-editions")).find(".j_paragraph_content"),n=e.data("ejs");a.globalParams.mtlParams.paragraphId=n.paragraphId,a.globalParams.mtlParams.chapterId=n.chapterId,a.globalParams.mtlParams.paraIndex=n.paraIndex;var i=o.data("ejs");a.globalParams.mtlParams.contentId=i.contentId,a.globalParams.mtlParams.originalUserId=i.originalUserId,a.globalParams.mtlParams.panel=e,this.showEditionEditPanel()}},showEditionEditPanel:function(){var t=this;r(".edit-area").remove(),r(".j_page").addClass("edit-disable"),t.editionModalApi.close();var a=t.globalParams.mtlParams,e=a.chapterId,o=a.paragraphId,n=a.contentId,i=(a.originalUserId,a.panel),s=i.find(".j_paragraph_content").clone();s.find("pirate").remove();var d=r.trim(s.find("p").text()),l=p.render("#editionEditTemplate.html",r.extend({},g,{statusCode:g_data.login.statusCode,env:g_data.env,contentId:n,paragraphId:o,chapterId:e,bookId:g_data.bookId,paragraph:d,userId:g_data.login.user.userId}));t.globalParams.isEditionEdit=!0,r(r.trim(l)).insertAfter(i),i.addClass("in-edit-mode");var c=r(".j_edit_area")[0];c&&c.scrollIntoView&&c.scrollIntoView({behavior:"smooth",block:"nearest"});var h=r(".j_edition_edit_submit");r(".j_edit_area textarea").on("keyup",(function(t){var a=r.trim(r(this).val());a!==d&&""!==a?h.removeClass("_disabled"):h.addClass("_disabled")}))},removeEditionEditPanel:function(t){return r(".j_edit_area").remove(),r(".in-edit-mode").removeClass("in-edit-mode"),r(".j_page").removeClass("edit-disable"),this.globalParams.isEditionEdit=!1,this.globalParams.isSubmitingEdition=!1,t&&(t.preventDefault(),t.stopPropagation()),!1},renderParagraph:function(t,a){var e=a.find(".j_paragraph_content"),o=this.globalParams.mtlParams,n=o.chapterId,i=o.paraIndex,s=r.extend({paraInfo:t,paraIndex:i},{isZh:"zh"===g_data.languageName.toLowerCase(),chapterId:n,isWhiteUser:g_data.isWhiteUser},{staticPath:g_data.staticPath,env:g_data.env,statusCode:g_data.login.statusCode,showTopSplit:!1,showBottomSplit:!1},{data:{user:g_data.login.user}},g),d=p.render("#paraWords.html",s);e.replaceWith(d),a.find(".j_open_edit_edition_txt").text(+t.contentAmount>0?"edit":"add")},submitEdition:function(t){var a=this;if(!r(a).hasClass("_disabled")&&(t.preventDefault(),t.stopPropagation(),!a.globalParams.isSubmitingEdition)){var e=r(t.currentTarget);e.addClass("_loading"),a.globalParams.isSubmitingEdition=!0;var o=r(".j_edit_area").find("form"),n=d.getFormParams(o.serializeArray()),i=n.userId,s=r(".j_paragraph.in-edit-mode"),l=+a.globalParams.mtlParams.originalUserId==+i,c=l?"/go/pcm/machineTrans/updateContent":"/go/pcm/machineTrans/addContent",p=s.find(".j_edition_count").text();r.ajax({type:"POST",url:c,data:n,success:function(t){0===t.code?((new h).success("Your edition submitted successfully!"),a.renderParagraph({content:n.content,contentId:l?n.contentId:t.data.contentId,userId:g_data.login.user.userId,contentAmount:l?p:p?+p+1:2},s),a.removeEditionEditPanel()):l&&-155002==+t.code?(new h).error("Update failure. This version is the official version at present."):(new h).error(l?"Update":"Submission failure. Please try again."),e.removeClass("_loading"),a.globalParams.isSubmitingEdition=!1},error:function(t){(new h).error(l?"Update":"Submission failure. Please try again."),e.removeClass("_loading"),a.globalParams.isSubmitingEdition=!1}})}},updateEditionsNumRight:function(t){var a=r("#modalEdition").find(".j_edition_num"),e=r("#modalEdition").find(".j_edition_text");t>1?e.html("Editions"):e.html("Edition"),t>0?(t>99&&(t="99+"),a.html("("+t+")")):a.html("(0)")},delParagraphEdition:function(t){var a=this,e=a.globalParams.mtlParams,o=e.chapterId,n=e.contentId,i=e.paragraphId,s=r(".j_edition_"+n),d=r(".j_paragraph.show-editions");r.ajax({type:"POST",url:"/go/pcm/machineTrans/delContent",data:{bookId:g_data.bookId,paragraphId:i,chapterId:o,contentId:n},success:function(t){if(0===t.code){(new h).success(t.msg),s.remove(),a.globalParams.editionCount--,a.updateEditionsNumRight(a.globalParams.editionCount);var e=r(".j_edition_block");0==e.children().length&&e.append('<div class="g_msg_empty"><strong>No edition</strong></div>'),a.renderParagraph(t.data[0],d),r(".j_edition_content .j_open_edit_edition").removeClass("dn")}else-155002==+t.code?(new h).error("Deletion failure. This version is the official version at present."):(new h).error("Deletion failure. Please try again.")},error:function(t){(new h).error("Deletion failure. Please try again.")}})}})}.call(a,e,a,t))||(t.exports=o)},1174:(t,a,e)=>{"use strict";var o;void 0===(o=function(t,a,o){var r=e(7113),n=e(8998);return function(t){var a,e=r(t.currentTarget),o=e.closest(".j_mtl_edition_wrap"),i=e.parent().find(".j_like_num"),s=o.data("ejs"),d=s.bookId,l=s.contentId,c=s.chapterId,p=i.html()||0;0==g_data.login.statusCode?(e.get(0).checked?(a=1,i.html(parseInt(p)+1)):(a=2,i.html(parseInt(p)-1==0?"":parseInt(p)-1)),r.ajax({type:"POST",url:"/go/pcm/machineTrans/like",data:{bookId:d,chapterId:c,contentId:l,operateType:a},success:function(){}})):n.Login.showLoginModal()}}.call(a,e,a,t))||(t.exports=o)},1025:(t,a,e)=>{"use strict";var o;void 0===(o=function(t,a,o){var r=e(7113),n=(e(7398),{interval:1e3,maxCount:0,isPause:!1,onStart:null,onCount:null,onStop:null});function i(t){r.extend(!0,this,n,t),this.init()}return i.prototype.init=function(){var t,a=this,e=this.maxCount;"function"==typeof a.onStart&&a.onStart(e),function o(){var r=setTimeout((function(){if(a.isPause)return a.maxCount=e,void(t=setInterval((function(){a.isPause||(clearInterval(t),o())}),100));e>1?(--e,"function"==typeof a.onCount&&a.onCount(e),o()):("function"==typeof a.onStop&&a.onStop(e),e=0,clearTimeout(r))}),a.interval);a.timer=r}()},i.prototype.pause=function(){this.isPause=!0},i.prototype.continue=function(){this.isPause=!1},i.prototype.deleteTimer=function(){this.timer&&clearTimeout(this.timer)},i}.call(a,e,a,t))||(t.exports=o)},5851:(t,a,e)=>{"use strict";var o;void 0===(o=function(t,a,o){var r=e(7113),n=e(9209);e(9985);var i={bookId:"",bookName:"",guid:"",userName:""};function s(t){r.extend(!0,this,i,t),this.init()}return s.prototype.init=function(){var t=this,a=r("#shareModal");this.modalApi=a.overlay({onBeforeLoad:function(){var e="https://"+g_data.env+"activity.webnovel.com/57880040/invite/"+t.guid+"/"+t.bookId;a.html(n.render("#shareModalTpl",{bookName:t.bookName,shareLink:e,userName:t.userName}))}}).data("overlay"),a.unbind("click.close").on("click.close",".j_share_options a",(function(){t.modalApi.close()}))},s.prototype.setParams=function(t){r.extend(!0,this,t)},s.prototype.showShareModal=function(){this.modalApi&&this.modalApi.load()},s}.call(a,e,a,t))||(t.exports=o)},5118:(t,a,e)=>{"use strict";var o;void 0===(o=function(t){var a=e(7113),o=e(7526),r=e(9751),n=e(9573),i=e(2271),s=e(7722),d=e(3245),l=e(8533);e(9985);var c={btSel:".j_review",$form:!1,onClose:function(){},revSuccess:function(){location.reload()},imgObj:null,rangeData:{text:"",start:0,end:0},isLoadingImg:!1};function p(t){a.extend(!0,this,c,t),this.init()}return p.prototype.init=function(){var t=this;t.btSel&&a(document).off("click.review").on("click.review",t.btSel,(function(e){if(e.preventDefault(),!1!==t.onBeforeShow()){var o=a(this).attr("href"),r=a(o);t.$form=r,t.$form.removeClass("_error"),t.showReviewModal(r)}}))},p.prototype.showReviewModal=function(t){var a=this,e=a.reviewModalApi;e?e.load():(a.formInit(t),a.reviewModalApi=t.overlay({load:!0,onClose:function(){if(a.onClose(this),a.gifBtn)try{a.gifBtn.apiDrop.hide(),a.emojiBtn.apiDrop.hide()}catch(t){}},closeOnEsc:!1,onLoad:function(){new r(t.find("textarea")),a.gifBtn||(a.initUpload(t),a.initGif(t),a.initEmoji(t)),t.off("click.clear").on("click.clear",".j_img_delete",(function(){a.deleteImg(t)})),t.off("click.editor").on("click.editor",".rich_editor",(function(){var t=d.getCursorPosition(this);a.rangeData=t})),t.off("keyup.editor").on("keyup.editor",".rich_editor",(function(t){if(37===t.keyCode||38===t.keyCode||39===t.keyCode||40===t.keyCode){var e=d.getCursorPosition(this);a.rangeData=e}})),i.send({target:t[0]},{ltype:"P",eid:"qi_P_commentedit"})}}).data("overlay"))},p.prototype.initUpload=function(t){var a=this,e=new n({onSuccess:function(e){a.showUploadImg(e,t)},onError:function(){a.deleteImg(t)},onChange:function(){a.setImgLoading(t)}});this.uploadBtn=e},p.prototype.initGif=function(t){var a=this,e=new l({$trigger:t.find(".j_gif_drop"),onChoose:function(e){a.showUploadImg(e,t)}});this.gifBtn=e},p.prototype.initEmoji=function(t){var a=this,e=new s({$trigger:t.find(".j_emoji_drop"),onChoose:function(e){a.setContent(e,t)}});this.emojiBtn=e},p.prototype.setImgLoading=function(t){this.isLoadingImg=!0,t.find('button[type="submit"]').attr("disabled",!0),t.find(".j_rich_img_box").addClass("_loading"),t.find(".j_upload_img")[0].disabled=!0,t.find(".j_gif_drop")[0].disabled=!0},p.prototype.showUploadImg=function(t,a){this.imgObj=t,this.isLoadingImg=!1,a.find(".j_rich_img").css("background-image","url("+t.url+")"),a.find(".j_rich_img_box").addClass("_active"),a.find(".j_upload_img")[0].disabled=!0,a.find(".j_gif_drop")[0].disabled=!0,a.trigger("validate")},p.prototype.deleteImg=function(t){try{this.uploadBtn.cancel()}catch(t){}this.imgObj=null,this.isLoadingImg=!1,t.find(".j_rich_img_box").removeClass("_active").removeClass("_loading"),t.find(".j_rich_img").css("background-image","none"),t.find(".j_upload_img")[0].disabled=!1,t.find(".j_gif_drop")[0].disabled=!1,t.trigger("validate")},p.prototype.setContent=function(t,a){var e=a.find(".rich_editor"),o=this.rangeData,r=e.val(),n=r.slice(0,o.start)+t+r.slice(o.end);e.val(n),o.start+=t.length,o.end=o.start,o.text="",d.setCursorPosition(e[0],o),e.trigger("input")},p.prototype.revSuccess=function(){},p.prototype.revFail=function(t,a){var e="Something went wrong, please retry later";-113001===t.code&&(e="You have reached this novel's review limit."),e=t.msg||e,a.find(".g_mod_error").html(e),a.addClass("_error"),a.find(".g_mod_ft label").removeClass("_loading")},p.prototype.getFormParams=function(t){var e={};return a.each(t,(function(){e[this.name]?(e[this.name].push||(e[this.name]=[e[this.name]]),e[this.name].push(this.value||"")):e[this.name]=this.value||""})),e},p.prototype.valiSuccess=function(t){var e=this,o=e.getFormParams(t.serializeArray()),r=t.find(".g_mod_ft label");if(!r.hasClass("_loading")){r.addClass("_loading"),this.imgObj&&(o.imageUrl=this.imgObj.url,o.width=this.imgObj.width,o.height=this.imgObj.height);var n=setTimeout((function(){clearTimeout(n),r.removeClass("_loading")}),1e4);a.ajax({url:t.attr("action"),method:"POST",data:o,success:function(a){0===a.code?(e.revSuccess(o,t,e.reviewModalApi),e.deleteImg(t)):e.revFail(a,t),clearTimeout(n)}})}},p.prototype.formInit=function(t){var a=this;new o({$form:t});var e={valiTxt:function(){return this.$txt.val().length>=140},valiRadio:function(){var t=!0;return this.$form.find('input[type="radio"]:checked').each((function(){if("0"===this.value)return t=!1,!1})),t},checkRadio:function(){var t=this;t.valiRadio()?t.valiTxt()&&t.showSubmit():t.hideSubmit()},checkTxt:function(){var t=this;t.valiTxt()?(t.$txt.addClass("_hadTxt"),t.valiRadio()&&t.showSubmit()):(t.$txt.removeClass("_hadTxt"),t.hideSubmit())},hideSubmit:function(){this.$submit.attr("disabled",!0)},showSubmit:function(){this.$submit.removeAttr("disabled")},init:function(t){this.$form=t,this.$submit=t.find('button[type="submit"]'),this.$txt=t.find("textarea"),this.$txt.bind("focus",(function(){i.send({target:t[0]},{eid:"qi_A_inputbox",uiname:"inputbox"})}))}};e.init(t);var r=!0;t.off("validate").on("validate",(function(){e.checkTxt()})).off("change.post").on("change.post",'input[type="radio"]',(function(){e.checkRadio()})).off("input.post propertychange.post").on("input.post propertychange.post","textarea",(function(){r&&e.checkTxt(),r=!1;var t=this;setTimeout((function(){r=!0;var e=d.getCursorPosition(t);a.rangeData=e}),16)})).on("reset",(function(){t.find(".g_mod_ft label").removeClass("_loading")})).on("submit",(function(e){e.preventDefault(),a.valiSuccess(t)}))},p}.call(a,e,a,t))||(t.exports=o)},1675:(t,a,e)=>{"use strict";var o;void 0===(o=function(t,a,o){var r=e(7113),n=e(8998),i=e(288);e(9985);var s={$modal:null,btSel:null,isFirstShow:!1,needLogin:!1,eachShow:function(t,a){},firstShow:function(t,a){}};function d(t){r.extend(!0,this,s,t),this.init()}return d.prototype.init=function(){var t=this,a=t.$modal;if(!a.length)return!1;t.modalApi=a.overlay().data("overlay"),r(document).on("click",t.btSel,(function(a){return a.preventDefault(),!!t.loginPass()&&t.onClick(r(this))}))},d.prototype.close=function(){this.modalApi.close()},d.prototype.showError=function(t){var a=this;a.modalFormStatusApi?a.modalFormStatusApi.showError(t):a.modalFormStatusApi=new i(a.modalApi.$modal||a.$modal,t)},d.prototype.loginPass=function(){return!(this.needLogin&&g_data&&g_data.login&&0!=g_data.login.statusCode&&(n.Login.showLoginModal(),1))},d.prototype.onClick=function(t){var a=this;a.modalApi.load(),a.eachShow(a.$modal,t),!a.isFirstShow&&a.firstShow(a.$modal,t),a.isFirstShow=!0},d}.call(a,e,a,t))||(t.exports=o)},288:(t,a,e)=>{"use strict";var o;void 0===(o=function(t,a,o){var r=e(7113),n={errorClass:"_error",errorWrapClass:"g_mod_error",errorAfterSel:".g_mod_hd"};function i(t,a){this.$form=t,r.extend(!0,this,n,{}),this.init(a)}return i.prototype.init=function(t){var a=this;a.createError(),a.showError(t),a.$form.on("reset",(function(){a.showError("")}))},i.prototype.showError=function(t){var a=this;t?(a.$error.html(t),a.$form.addClass(a.errorClass)):a.$form.removeClass(a.errorClass)},i.prototype.reset=function(){this.$form.removeClass(this.errorClass)},i.prototype.createError=function(){var t=this,a=t.$form,e=a.find("."+t.errorWrapClass);if(e.length)e.html(""),t.$error=e;else{var o=a.find(t.errorAfterSel)[0];t.$error=r('<div class="'+t.errorWrapClass+'"></div>').insertAfter(o)}},i}.call(a,e,a,t))||(t.exports=o)},6263:(t,a,e)=>{"use strict";var o;void 0===(o=function(){return function(t){if(!t||!t.length)return null;var a="mousewheel";void 0!==document.mozHidden&&(a="DOMMouseScroll"),t.on(a,(function(t){var a=this.scrollTop,e=this.scrollHeight,o=this.clientHeight,r=t.originalEvent.wheelDelta?t.originalEvent.wheelDelta:-(t.originalEvent.detail||0);(r>0&&a<=r||r<0&&e-o-a<=-1*r)&&(this.scrollTop=r>0?0:e,t.preventDefault())}))}}.call(a,e,a,t))||(t.exports=o)},435:(t,a,e)=>{"use strict";var o;void 0===(o=function(t,a,o){var r=e(7113),n={containerSel:"body",sel:null,$it:!1,events:"mousewheel.doubleScroll DOMMouseScroll.doubleScroll"};function i(t){r.extend(!0,this,n,t),this.init()}return i.prototype.run=function(t,a){var e=a.originalEvent.wheelDelta&&(a.originalEvent.wheelDelta>0?1:-1)||a.originalEvent.detail&&(a.originalEvent.detail>0?-1:1);e>0&&0==t.scrollTop&&a.preventDefault(),e<0&&!(t.scrollHeight>t.scrollTop+t.offsetHeight)&&a.preventDefault()},i.prototype.init=function(){var t=this,a=t.$it;a.length?a.off(t.events).on(t.events,(function(a){t.run(this,a)})):r(t.containerSel).off(t.events).on(t.events,t.sel,(function(a){t.run(this,a)}))},i}.call(a,e,a,t))||(t.exports=o)},7526:(t,a,e)=>{"use strict";var o;void 0===(o=function(t,a,o){var r=e(7113),n={$form:!1,selStar:".j_score_star",selNum:".j_score_num",selInput:".j_total_score"};function i(t){r.extend(!0,this,n,t),this.init()}return i.prototype.init=function(){var t=this,a=this.$form;a.length&&(this.$star=a.find(t.selStar),this.$num=a.find(t.selNum),this.$numInput=a.find(t.selInput),a.on("change",'input[type="radio"]',(function(){var e=t.getScore(a);t.setScore(e)})).on("reset",(function(){t.setScore("0.0")})))},i.prototype.getScore=function(t){var a=0,e=0;return t.find('input[type="radio"]:checked').each((function(t,o){var r=parseInt(this.value);a+=r,r>0&&e++})),e?(a/=e).toFixed(1):0},i.prototype.getStarByScore=function(t){for(var a=t.toString().split("."),e="",o=parseInt(a[0]),r=0!=a[1],n=0;n<5;n++)e+=n<o?'<svg class="_on"><use xlink:href="#i-star"></use></svg>':n==o&&r?'<svg class="_half"><use xlink:href="#i-star"></use></svg>':'<svg><use xlink:href="#i-star"></use></svg>';return'<span class="g_star">'+e+"</span>"},i.prototype.setScore=function(t){var a=this,e=a.getStarByScore(t);a.$star.html(e),a.$num.html(t),a.$numInput.val(t)},i}.call(a,e,a,t))||(t.exports=o)},6448:(t,a,e)=>{"use strict";var o=e(5318);e(9049),e(107),e(4533),e(7778),new(o(e(9920)).default)},6894:(t,a,e)=>{"use strict";e.r(a),e.d(a,{default:()=>s});var o=e(7091),r=e.n(o),n=e(4610),i=r()(n);const s='<% var bookList = data.recommendListItems; %> <% if(bookList && bookList.length){ %> <div class="clearfix mb16"> <h3 class="g_h2 fl">You may also Like</h3> <div class="fr pt8"> <a href="/alsolike/list/<%= bookId; %>?type=2" class="lh16 fs16" title="more">More</a> </div> </div> <ul class="clearfix"> <% for(var i = 0, len = Math.min(bookList.length, 6); i < len; i++){ %> <li class="g_col _2"> <% var data = bookList[i]; %> <% data.size = \'sm\'; %> <% data.renderStright = 1; %> <%\nvar className;\nswitch(data.size) {\n\tcase \'sm\': className = \'g_thumb _sm\';break;\n\tcase \'bg\': className = \'g_thumb _lg\';break;\n\tcase \'mi\': className = \'g_thumb _xs\';break;\n\tdefault: className = \'g_thumb\';break;\n}\n%> <% if( data.placeholder ) { %> <div class="m-book _ph"> <div class="g_thumb mb8"> <% if(staticConf && staticConf.imgPh ){ %> <img src="<%= staticConf.imgPh %>" width="140" height="186" alt="book cover"> <% } else { %> <img src="'+i+'" width="140" height="186" alt="book cover"> <% } %> </div> <div class="_ph _ph1 mb8"></div> <div class="_ph _ph2 mb8"></div> <div class="_ph _ph3 mb8"></div> </div> <% } else { %> <% var propBookEid = data.bookEid ? \'data-report-eid="\'+ data.bookEid + \'"\':\'\';  %> <% var propCategoryEid = data.categoryEid ? \'data-report-eid="\'+ data.categoryEid + \'"\':\'\';  %> <% var novelType = +data.novelType || 0; %> <div class="m-book"> <a class="m-book-title c_000 db" href="<%= getCommonBookUrl(staticConf.domainPrefix, data, novelType) %>" title="<%= data.bookName %>" <%= propBookEid %> data-report-bid="<%=  data.bookId %> "> <i class="<%= className%> mb8"> <% if( data.renderStright ){ %> <img src="<%= getBookImgUrl(staticConf.domainPrefix, data, 140) %>" width="140" height="186" alt="<%= data.bookName %>"> <% } else if(staticConf && staticConf.imgPh ){ %> <img src="<%= staticConf.imgPh %>" data-original="<%= getBookImgUrl(staticConf.domainPrefix, data, 140) %>" width="140" height="186" alt="<%= data.bookName %>"> <% } else { %> <img src="'+i+'" data-original="<%= getBookImgUrl(staticConf.domainPrefix, data, 140) %>" width="140" height="186" alt="<%= data.bookName %>"> <% } %> <% if( novelType === 100 ){ %> <%- getComicTag();%> <% } %> <%- getOriginalTag(data.type)%> <% if( data.rankNum ){ %> <span class="fw700 pa t0 l0 _num _num<%= data.rankNum %>"><%= data.rankNum %></span> <% } %> <% var sameFlag = data.sameFlag; %> <% if( sameFlag && sameFlag != \'category\' ) { %> <span class="pa l0 b0 _flag fs14 ell">Same <%= sameFlag %></span> <% } %> </i> <h3 class="g_h4 ells _2"><%= data.bookName %></h3> </a> <% if(data.categoryName) { %> <a href="<%= getCategoryUrl(staticConf.domainPrefix, { categoryId: data.categoryId }, bookTypeToCategoryType(novelType)) %>" class="_type db ell c_s ttc ell" <%= propCategoryEid %> data-report-genreid="<%= data.categoryName%>" title="<%= data.categoryName%>"><%= data.categoryName%></a> <% } %> <% if( typeof data.totalScore !== \'undefined\' && data.totalScore != null ){ %> <div class="g_star_num fs16" title="<%= data.totalScore %>"><%- getStarHtml(data.totalScore) %><% if(data.totalScore){ %><small><%= data.totalScore %></small><% } %></div> <% } %> <% if( data.powerStoneNum ){ %> <strong class="fs14 db"><i class="i_stone _power"></i><%= data.powerStoneNum %></strong> <% } %> </div> <% } %> </li> <% } %> </ul> <% } %> '},5017:(t,a,e)=>{"use strict";e.r(a),e.d(a,{default:()=>s});var o=e(7091),r=e.n(o),n=e(3566),i=e(7903);const s='<div class="pt12 pb12 pl16 pr16 chapter-pop-tip j_para_comment_tip" style="top:<%=top%>px"> <p class="fs16 lh20 mb12 chapter-pop-tip-tit"> <img class="vat" src="'+r()(n)+'" srcset="'+r()(i)+' 2x" width="18" height="20" alt="tip"> Paragraph comment </p> <p class="fs16 lh20 mb4 chapter-pop-tip-des"> Paragraph comment feature is now on the Web! Move mouse over any paragraph and click the icon to add your comment. </p> <p class="fs16 lh20 mb12 chapter-pop-tip-des"> Also, you can always turn it off/on in Settings. </p> <a class="bt _s j_para_comment_close" title="GOT IT">GOT IT</a> </div> '},3417:(t,a,e)=>{"use strict";e.r(a),e.d(a,{default:()=>s});var o=e(7091),r=e.n(o),n=e(3566),i=e(7903);const s='<div class="pt12 pb12 pl16 pr16 chapter-pop-tip j_edition_tip" style="top:<%=top%>px" data-paragraphid="<%=paragraphId%>"> <p class="fs16 lh20 mb12 chapter-pop-tip-tit"> <img class="vat" src="'+r()(n)+'" srcset="'+r()(i)+' 2x" width="18" height="20" alt="tip"> TIP </p> <p class="fs16 lh20 mb12 chapter-pop-tip-des"> <% if(+isWhiteUser===1){ %> This work is machine translated. <br/>Click on the paragraph and you can modify the lacking parts. <br/>Your version will be seen by other users, and might become the official version. <br/>Give it a try! <% }else{ %> This paragraph has been edited! <br/>Click the small bubble to check the other versions of the paragraph, and give the one you like best a Like! <% } %> </p> <a class="bt _s j_edition_tip_close" title="GOT IT">GOT IT</a> </div> '},107:(t,a,e)=>{"use strict";e.r(a)},4533:(t,a,e)=>{"use strict";e.r(a)},4610:(t,a,e)=>{"use strict";t.exports=e.p+"en/images/imgPh.4f7f9b3b.png"},3566:(t,a,e)=>{"use strict";t.exports=e.p+"en/images/lightTip.f29a6a2b.png"},7903:(t,a,e)=>{"use strict";t.exports=e.p+"en/images/lightTip@2x.07e42936.png"},1956:(t,a,e)=>{var o;void 0===(o=function(){var r={};return function(n,i,s){if(n){for(var d,l={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},c={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},p={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},h={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},g=1;g<20;++g)l[111+g]="f"+g;for(g=0;g<=9;++g)l[g+96]=g.toString();I.prototype.bind=function(t,a,e){var o=this;return t=t instanceof Array?t:[t],o._bindMultiple.call(o,t,a,e),o},I.prototype.unbind=function(t,a){return this.bind.call(this,t,(function(){}),a)},I.prototype.trigger=function(t,a){var e=this;return e._directMap[t+":"+a]&&e._directMap[t+":"+a]({},t),e},I.prototype.reset=function(){var t=this;return t._callbacks={},t._directMap={},t},I.prototype.stopCallback=function(t,a){return!((" "+a.className+" ").indexOf(" mousetrap ")>-1)&&!C(a,this.target)&&("INPUT"==a.tagName||"SELECT"==a.tagName||"TEXTAREA"==a.tagName||a.isContentEditable)},I.prototype.handleKey=function(){var t=this;return t._handleKey.apply(t,arguments)},I.addKeycodes=function(t){for(var a in t)t.hasOwnProperty(a)&&(l[a]=t[a]);d=null},I.init=function(){var t=I(i);for(var a in t)"_"!==a.charAt(0)&&(I[a]=function(a){return function(){return t[a].apply(t,arguments)}}(a))},I.init(),n.Mousetrap=I,r=I,t.exports&&(t.exports=I),void 0===(o=function(){return I}.call(a,e,a,t))||(t.exports=o)}function u(t,a,e){t.addEventListener?t.addEventListener(a,e,!1):t.attachEvent("on"+a,e)}function m(t){if("keypress"==t.type){var a=String.fromCharCode(t.which);return t.shiftKey||(a=a.toLowerCase()),a}return l[t.which]?l[t.which]:c[t.which]?c[t.which]:String.fromCharCode(t.which).toLowerCase()}function f(t){return"shift"==t||"ctrl"==t||"alt"==t||"meta"==t}function _(t,a,e){return e||(e=function(){if(!d)for(var t in d={},l)t>95&&t<112||l.hasOwnProperty(t)&&(d[l[t]]=t);return d}()[t]?"keydown":"keypress"),"keypress"==e&&a.length&&(e="keydown"),e}function v(t,a){var e,o,r,n=[];for(e=function(t){return"+"===t?["+"]:(t=t.replace(/\+{2}/g,"+plus")).split("+")}(t),r=0;r<e.length;++r)o=e[r],h[o]&&(o=h[o]),a&&"keypress"!=a&&p[o]&&(o=p[o],n.push("shift")),f(o)&&n.push(o);return{key:o,modifiers:n,action:a=_(o,n,a)}}function C(t,a){return null!==t&&t!==i&&(t===a||C(t.parentNode,a))}function I(t){var a=this;if(t=t||i,!(a instanceof I))return new I(t);a.target=t,a._callbacks={},a._directMap={};var e,o={},r=!1,n=!1,s=!1;function d(t){t=t||{};var a,e=!1;for(a in o)t[a]?e=!0:o[a]=0;e||(s=!1)}function l(t,e,r,n,i,s){var d,l,c,p,h=[],g=r.type;if(!a._callbacks[t])return[];for("keyup"==g&&f(t)&&(e=[t]),d=0;d<a._callbacks[t].length;++d)if(l=a._callbacks[t][d],(n||!l.seq||o[l.seq]==l.level)&&g==l.action&&("keypress"==g&&!r.metaKey&&!r.ctrlKey||(c=e,p=l.modifiers,c.sort().join(",")===p.sort().join(",")))){var u=!n&&l.combo==i,m=n&&l.seq==n&&l.level==s;(u||m)&&a._callbacks[t].splice(d,1),h.push(l)}return h}function c(t,e,o,r){a.stopCallback(e,e.target||e.srcElement,o,r)||!1===t(e,o)&&(function(t){t.preventDefault?t.preventDefault():t.returnValue=!1}(e),function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}(e))}function p(t){"number"!=typeof t.which&&(t.which=t.keyCode);var e=m(t);e&&("keyup"!=t.type||r!==e?a.handleKey(e,function(t){var a=[];return t.shiftKey&&a.push("shift"),t.altKey&&a.push("alt"),t.ctrlKey&&a.push("ctrl"),t.metaKey&&a.push("meta"),a}(t),t):r=!1)}function h(t,n,i,p,g){a._directMap[t+":"+i]=n;var u,f=(t=t.replace(/\s+/g," ")).split(" ");f.length>1?function(t,a,n,i){function l(a){return function(){s=a,++o[t],clearTimeout(e),e=setTimeout(d,1e3)}}function p(a){c(n,a,t),"keyup"!==i&&(r=m(a)),setTimeout(d,10)}o[t]=0;for(var g=0;g<a.length;++g){var u=g+1===a.length?p:l(i||v(a[g+1]).action);h(a[g],u,i,t,g)}}(t,f,n,i):(u=v(t,i),a._callbacks[u.key]=a._callbacks[u.key]||[],l(u.key,u.modifiers,{type:u.action},p,t,g),a._callbacks[u.key][p?"unshift":"push"]({callback:n,modifiers:u.modifiers,action:u.action,seq:p,level:g,combo:t}))}a._handleKey=function(t,a,e){var o,r=l(t,a,e),i={},p=0,h=!1;for(o=0;o<r.length;++o)r[o].seq&&(p=Math.max(p,r[o].level));for(o=0;o<r.length;++o)if(r[o].seq){if(r[o].level!=p)continue;h=!0,i[r[o].seq]=1,c(r[o].callback,e,r[o].combo,r[o].seq)}else h||c(r[o].callback,e,r[o].combo);var g="keypress"==e.type&&n;e.type!=s||f(t)||g||d(i),n=h&&"keydown"==e.type},a._bindMultiple=function(t,a,e){for(var o=0;o<t.length;++o)h(t[o],a,e)},u(t,"keypress",p),u(t,"keydown",p),u(t,"keyup",p)}}("undefined"!=typeof window?window:null,"undefined"!=typeof window?document:null),r}.call(a,e,a,t))||(t.exports=o)}},a={};function e(o){if(a[o])return a[o].exports;var r=a[o]={exports:{}};return t[o].call(r.exports,r,r.exports,e),r.exports}e.m=t,e.x=t=>{},e.n=t=>{var a=t&&t.__esModule?()=>t.default:()=>t;return e.d(a,{a}),a},e.d=(t,a)=>{for(var o in a)e.o(a,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:a[o]})},e.o=(t,a)=>Object.prototype.hasOwnProperty.call(t,a),e.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.p="//www.yueimg.com/",(()=>{var t={2703:0},a=[[6448,9973,7113,3154,3752,6256,8998,5832,146,6384,351]],o=t=>{},r=(r,n)=>{for(var i,s,[d,l,c,p]=n,h=0,g=[];h<d.length;h++)s=d[h],e.o(t,s)&&t[s]&&g.push(t[s][0]),t[s]=0;for(i in l)e.o(l,i)&&(e.m[i]=l[i]);for(c&&c(e),r&&r(n);g.length;)g.shift()();return p&&a.push.apply(a,p),o()},n=self.webpackChunkwebnovel_pc=self.webpackChunkwebnovel_pc||[];function i(){for(var o,r=0;r<a.length;r++){for(var n=a[r],i=!0,s=1;s<n.length;s++){var d=n[s];0!==t[d]&&(i=!1)}i&&(a.splice(r--,1),o=e(e.s=n[0]))}return 0===a.length&&(e.x(),e.x=t=>{}),o}n.forEach(r.bind(null,0)),n.push=r.bind(null,n.push.bind(n));var s=e.x;e.x=()=>(e.x=s||(t=>{}),(o=i)())})(),e.x()})();