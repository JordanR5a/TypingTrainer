(self.webpackChunkwebnovel_pc=self.webpackChunkwebnovel_pc||[]).push([[6256],{9026:(e,t,a)=>{"use strict";var i,n;void 0===(n="function"==typeof(i=function(){var e="ui-lightip",t=e+"-";$.lightTip=function(){var a=function(a){return i($('<div class="'+e+'"></div>').html('<i class="'+t+'icon">&nbsp;</i><span class="'+t+'text">'+a+"</span>").appendTo($(document.body)))},i=function(e){var t=e.css("z-index"),a=0;return $("body").children().each((function(){a=Math.max(t,parseInt($(this).css("z-index"))||0)})),t!=a&&e.css("z-index",a),e.css({left:"50%",marginLeft:-.5*e.outerWidth()})};return{success:function(e,i){var n=a(e).addClass(t+"success");return setTimeout((function(){n.fadeOut((function(){n.remove(),n=null}))}),i||3e3),n},error:function(e,i){var n=a(e).addClass(t+"error");return setTimeout((function(){n.fadeOut((function(){n.remove(),n=null}))}),i||3e3),n}}}();var a=function(){return this.el={},this};return a.prototype.success=function(e){return this.el.container=$.lightTip.success(e),this},a.prototype.error=function(e){return this.el.container=$.lightTip.error(e),this},a})?i.call(t,a,t,e):i)||(e.exports=n)},6256:(e,t,a)=>{"use strict";var i=a(5318)(a(8)),n=a(7113),o=a(9981),s=a(9026),r=a(797),d=a(5694),c=a(9209),u=a(2271),l=a(2199).default,g=a(5627).default,f=a(6169);a(3752);var p={l1:7,eid:"qi_I07",pid:"qi_p_googleonetap",ltype:"H"},h={throttle:d,addSignInSS:function(e,t){e.hasClass("_loading")||(e.addClass("_loading"),n.ajax({type:"POST",url:"/go/pcm/spiritStone/checkIn",success:function(a){0===a.code?(e.removeClass("_loading"),"function"==typeof t&&t(a)):(e.removeClass("_loading"),(new s).error(a.msg||"Failed to claim, try again later"))}}))},getMessageNum:function(){n.ajax({type:"GET",url:"/go/pcm/notification/status",data:{},success:function(e){if(0===e.code){e.data=e.data||{};var t=+e.data.messageStatus||0,a=+e.data.followingStatus||0,i=+e.data.systemNotificationStatus||0,o=+e.data.notificationStatus||0,s=t+i+o+a;if(s>0){var r="/events";i+o>0&&(r="/notifications"),a>0&&(r="/message"),t>0&&(r="/events"),g_data.login.message={num:s,url:r},n(".j_header_user").addClass("_up")}}}})},getUserInfo:function(e){var t,a=n(".j_loginWrap"),o=this;n.ajax({method:"GET",url:"/go/pcm/login/getUserInfo",data:{},success:function(s){0===s.code?0==s.data.user.status&&(a.hasClass("j_chapter")||(t=c.render(g,n.extend({},{data:{user:s.data.user,rechargeInfo:g_data.rechargeInfo},env:g_data.env,defaultAvatar:f,staticConf:{staticPath:g_data.staticPath,domainPrefix:g_data.env}},r)),a.html(t)),s.data.user.userId=s.data.user.guid,g_data.login.statusCode=s.data.user.status,n.extend(!0,g_data.login.user,s.data.user),o.checkHeaderTip(),o.getUserBadge(),null!=(0,i.default)(e)&&"function"==typeof e&&e()):g_data.login.statusCode=-1}})},loginRedirect:function(e,t,a){n.ajax({method:"GET",url:"/go/pcm/login/login",data:e,success:function(i){switch(i.code){case 0:o.get("googleonetaplogin")&&u.send({target:null},p),t();break;default:n(".g_mod_login").remove();var r=e&&e.guid||"";(new s).error("Something went wrong, please retry later(code: "+i.code+" uid: "+r+" )."),a&&a()}o.set("dontneedgoogleonetap","1","","/",94608e7)}})},showSelectTagMod:function(){var e=this,t=n(".g_mod_login");t.html(c.render(l,{tags:[]})),n.ajax({method:"get",url:"/apiajax/newbie/getTags",success:function(a){0==+a.code&&(t.html(c.render(l,{tags:a.data.tagItems||[]})),n(".j_tagsChooseLoading").remove(),e.initSelectTagMod())}}),t.off("click.modal").on("click.modal","._close",(function(e){e.preventDefault(),t.removeClass("_on"),location.reload()}))},initSelectTagMod:function(){n(".j_userSelectedTags").on("click","input",(function(e){n(".j_userSelectedTags input:checked").size()>6&&e.preventDefault(),n(".j_userSelectedTags input:checked").size()<=0?n(".j_submitTags").prop("disabled",!0):n(".j_submitTags").prop("disabled",!1)})),n(".j_submitTags").on("click",(function(){var e=[];n(".j_userSelectedTags input:checked").each((function(){e.push(n(this).data("id"))})),e.length>0&&n.ajax({method:"POST",url:"/apiajax/newbie/saveTagBooks",data:{tagIds:e.join("|")},success:function(){window.location.href="/library"}})}))},checkInLibrary:function(){var e=n(".g_bt_add_lib");n.ajax({type:"POST",url:"/go/pcm/library/checkInLibraryAjax",data:{bookId:e.data("bookid"),novelType:e.data("ntype")},success:function(t){if(0===t.code)if(e.attr("disabled",!1),t.data.inLibrary){var a=100==e.data("ntype")?"qi_CC04":"qi_C03";e.addClass("_inLib").attr("data-report-eid",a)}else{var i=100==e.data("ntype")?"qi_CC04":"qi_C02";e.removeClass("_inLib").attr("data-report-eid",i)}}})},checkHeaderTip:function(){o.get("checkInTip")||(n(".g_user").addClass("_check_in"),n("body").on("mouseenter",".g_user._check_in",(function(){n(this).removeClass("_check_in");var e=(new Date).setHours(24,0,0,0)-+new Date;o.set("checkInTip",1,".webnovel.com","/",e)})))},getUserBadge:function(){n.ajax({type:"GET",url:"/go/pcm/badge/getMyBadges",data:{},success:function(e){0===e.code&&g_data&&g_data.login&&g_data.login.user&&(g_data.login.user.badgeInfo=e.data.badgeInfo)}})}};e.exports=h},5694:(e,t,a)=>{"use strict";var i;void 0===(i=function(){return function(e,t,a){var i,n=new Date;return function(){var o=this,s=arguments,r=new Date;clearTimeout(i),r-n>=a?(e.apply(o,s),n=r):i=setTimeout(e,t)}}}.call(t,a,t,e))||(e.exports=i)},2199:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});const i='<div class="g_mod _small g_login_tags"> <div class="g_loading _auto _on j_tagsChooseLoading"><i></i></div> <a title="close" class="_close"><svg><use xlink:href="#i-times"></use></svg></a> <div class="g_mod_bd"> <div class="_hd"> <h4 class="fs24 fw700 lh1d2 mb8">What kind of stories do you like to read?</h4> <p class="fs12 c_s">Tell us your preferences for story recommendations. You can choose up to 6 tags.</p> </div> <div class="_tags j_userSelectedTags fs0 tac mb16"> <% tags.forEach(function(item) { %> <label><input type="checkbox" data-id="<%= item.tagId %>"><strong><span><%= item.tagName %></span></strong></label> <% }) %> </div> <div class="_ft"> <button type="submit" class="bt _block j_submitTags" disabled="disabled">Start Reading</button> </div> </div> </div> '},5627:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});const i='<% var notLogin = !data || !data.user || data.user.status != 0; %> <% if(notLogin){ %> <a href="javascript:;" class="bt _m login-btn j_login" title="sign in" data-report-eid="qi_A_home_signin" data-report-uiname="signin">sign in</a> <% } else{ %> <% var env = staticConf.domainPrefix; %> <% var userAvatar = getUserAvatar(env, data.user.guid, 200, data.user.UUT, 10); %> <div class="g_user j_header_user g_dropdown"> <i class="_dot dn pa t0 r0 br100p z1"></i> <a class="db j_header_user_trigger" href="javascript:;" title="My Profile" data-report-eid="qi_A_home_heads" data-report-uiname="heads"> <img width="40" height="40" class="g_drop_hd _hd oh br100p td300 db i_40" src="<%= userAvatar || defaultAvatar %>" alt="<%= data.user.userName %>"> </a> </div> <% } %> '},6169:(e,t,a)=>{"use strict";e.exports=a.p+"en/images/avatar.0e89c2d2.png"},2271:(e,t,a)=>{var i;void 0===(i=function(e){var t=window.$||window.Zepto||window.jQuery,i=a(9981),n={path:"pclog",cname:"QDpclog",ltype:"A",url:window.location.href,ref:document.referrer,sw:screen.width,sh:screen.height,x:"",y:"",title:document.title};function o(e){if(navigator.sendBeacon)navigator.sendBeacon(e,"");else{var t=new Image;t.onload=t.onerror=function(){t=null},t.src=e}}return{init:function(e){var a=this;if(e.cgi){try{e&&e.domain&&(a.cookieDomain=e.domain,delete e.domain),e&&e.e1&&(a.cookieE1=e.e1,delete e.e1),e&&e.e2&&(a.cookieE2=e.e2,delete e.e2)}catch(e){}n=t.extend(!0,n,e),t(document).ready((function(){var t={ltype:"P",x:"",y:""};g_data&&g_data.eid?(t.eid=g_data.eid,1==+g_data.reportOld&&(t.pid=t.eid)):t.eid=e.eid||e.pid;const i=g_data.report_params||{};o(a.getUrl(n.cgi,{...t,...i}))})),a.initSend()}else console.error("report cgi must be specified.")},initSend:function(){var e=this;t(document).off("click.Report"),t(document).on("click.Report",(function(t){t&&(!0===t.isTrigger||!1===t.isTrusted||t.hasOwnProperty("_args")||0===t.pageY&&0===t.screenY)||e.send(t,{ltype:"A"})}))},send:function(e,a,i){a=a||{};for(var s=t(e.target),r={ltype:"A",x:e.clientX+t("body").scrollLeft()||"",y:e.clientY+t("body").scrollTop()||""},d=t.extend({},n,r,a),c=s;c&&c[0]&&"BODY"!=c[0].tagName;){var u=this.getNodeReportInfo(c[0])||{};if(d=t.extend({},d,u),c.data("report-l1"))break;c=c.parent()}"undefined"!=typeof JSON&&(d=t.extend({},d,this._getE1E2()),this._setE1E2(d)),(i||d.l1)&&(void 0!==a.ltype&&d.ltype!==a.ltype||(d.eid?o(this.getUrl(n.cgi,d)):d.uiname&&(d.eid=`qi_${d.ltype}_${d.pid}_${d.uiname}`,o(this.getUrl(n.cgi,d)))))},getUrl:function(e,a){var i=t.extend({},n,a),o=[];return i.pn=i.pid,t.each(i,(function(e,t){o.push(e+"="+encodeURIComponent(t))})),-1!==e.indexOf("?")?e+="&"+o.join("&"):e+="?"+o.join("&"),e},getNodeReportInfo:function(e){var a=/^data-?report-?(.*)$/i,i={};if(e&&e.attributes){var n=e.attributes;t.each(n,(function(e,t){var n=t.name.match(a);n&&n.length>1&&(i[n[1]]=t.value)}))}return i},_getE1E2:function(){var e=this.cookieDomain||".qidian.com",t=this.cookieE1||"e1",a=this.cookieE1||"e2";return i.get(t)||i.set(t,"",e,"",2592e6),i.get(a)||i.set(a,"",e,"",2592e6),{e1:i.get(t),e2:i.get(a)}},_setE1E2:function(e){var t={},a=this.cookieDomain||".qidian.com",n=this.cookieE1||"e1",o=this.cookieE1||"e2";for(var s in e)"eid"===s&&(t[s]=e[s]),"pid"===s&&(t[s]=e[s]),/l[1-9]/.test(s)&&(t[s]=e[s]);i.set(o,i.get(n),a,"",2592e6),i.set(n,JSON.stringify(t),a,"",2592e6)}}}.call(t,a,t,e))||(e.exports=i)}}]);